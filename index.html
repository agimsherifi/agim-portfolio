<!DOCTYPE html>
<html lang="sq">
<head>
    <!-- Shto në <head> -->
<link rel="manifest" href="/manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0891b2">

<!-- Service Worker -->
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js')
      .then(reg => console.log('✅ Service Worker registered:', reg))
      .catch(err => console.log('❌ Service Worker error:', err));
  });
}
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- --- 2. SEO & META TAGS AVANCUAR --- -->
    <title>Agim Sherifi - Cinematic Portfolio | Robotikë & Poezi</title>
    <meta name="description" content="Eksploroni botën e Agim Sherifit - ku inxhinieria takohet me artin. Poezi, Fotografi, Robotikë dhe Thënie të zgjedhura.">
    <meta name="keywords" content="Agim Sherifi, Robotikë, Poezi Shqip, Fotografi Artistike, Inxhinieri Softuerike, Art Digjital, Thënie Filozofike">
    <meta name="author" content="Agim Sherifi">
    <meta name="theme-color" content="#0891b2">
    <meta name="robots" content="index, follow">
    <meta name="google-site-verification" content="">
    <meta property="og:locale" content="sq_AL">
    <meta property="og:site_name" content="Agim Sherifi Portfolio">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://agimsherifi.com/">
    <meta property="og:title" content="Agim Sherifi - Kodi dhe Vargu">
    <meta property="og:description" content="Aty ku logjika e ftohtë e kodit takohet me ngrohtësinë e pafundme të vargut. Një portofol kinematik.">
    <meta property="og:image" content="./images/galeri/portrait.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://agimsherifi.com/">
    <meta property="twitter:title" content="Agim Sherifi - Cinematic Portfolio">
    <meta property="twitter:description" content="Aty ku logjika e ftohtë e kodit takohet me ngrohtësinë e pafundme të vargut.">
    <meta property="twitter:image" content="./images/galeri/portrait.jpg">
    
<script src="https://unpkg.com/react-loadable@5.5.0/dist/react-loadable.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Cinzel:wght@400;700&family=Great+Vibes&family=Courier+Prime&display=swap"
        rel="stylesheet">

    <style>
        /* --- STILI DHE ANIMACIONET --- */
        :root {
            --color-primary: #06b6d4;
            --color-primary-dark: #0891b2;
            --color-text-light: #f8fafc;
            --color-text-dark: #0f172a;
            --transition-standard: 0.3s ease;
            --shadow-soft: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        /* Micro-interaction Animations */
@keyframes micro-bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
}

@keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

@keyframes text-glow {
    0%, 100% { text-shadow: 0 0 20px rgba(6, 182, 212, 0); }
    50% { text-shadow: 0 0 20px rgba(6, 182, 212, 0.5); }
}
/* Mobile Animation Optimizations */
@media (max-width: 768px) {
    .animate-on-mobile {
        animation-duration: 0.5s !important;
    }
    
    .reduce-motion * {
        animation: none !important;
        transition: none !important;
    }
    
    /* Touch-friendly buttons */
    .touch-target {
        min-height: 44px;
        min-width: 44px;
    }
}

/* Hardware Acceleration */
.gpu-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
}
/* Klasat e reja */
.micro-bounce { animation: micro-bounce 0.3s ease; }
.gradient-shift { 
    background-size: 200% 200%; 
    animation: gradient-shift 3s ease infinite; 
}
.text-glow { animation: text-glow 2s ease-in-out infinite; }

/* Hover effects enhancement */
.hover-glow:hover {
    box-shadow: 0 0 30px rgba(6, 182, 212, 0.2);
}

.hover-scale {
    transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.hover-scale:hover {
    transform: scale(1.02);
}
        
        .theme-transition * {
            transition: background-color 0.5s ease, 
                        color 0.5s ease,
                        border-color 0.5s ease;
        }
        /* Custom Scrollbar për klasën .custom-scrollbar */
.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
}
.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
  background-color: rgba(156, 163, 175, 0.5); /* gri e lehtë */
  border-radius: 20px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: rgba(6, 182, 212, 0.8); /* cyan */
}
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-15px); } }
        @keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes writing { 0%, 100% { transform: rotate(0deg) translateY(0); } 25% { transform: rotate(-20deg) translateY(2px); } 75% { transform: rotate(10deg) translateY(-2px); } }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pageEnter { 0% { opacity: 0; transform: translateY(30px) scale(0.98); filter: blur(10px); } 100% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); } }
        @keyframes blink { 50% { opacity: 0; } }
        
        /* 3. LOADER ANIMATION */
        @keyframes loaderGlow { 0% { text-shadow: 0 0 5px rgba(6,182,212,0); opacity: 0.5; } 50% { text-shadow: 0 0 20px rgba(6,182,212,1); opacity: 1; transform: scale(1.1); } 100% { text-shadow: 0 0 5px rgba(6,182,212,0); opacity: 0.5; } }
        @keyframes loaderFadeOut { from { opacity: 1; visibility: visible; } to { opacity: 0; visibility: hidden; } }

        /* Timeline Animations */
        @keyframes slideInRight { from { opacity: 0; transform: translateX(-50px) rotateY(-10deg); } to { opacity: 1; transform: translateX(0) rotateY(0); } }
        @keyframes slideInLeft { from { opacity: 0; transform: translateX(50px) rotateY(10deg); } to { opacity: 1; transform: translateX(0) rotateY(0); } }

        /* Audio wave animation */
        @keyframes audio-wave {
            0%, 100% { transform: scaleY(1); opacity: 1; }
            50% { transform: scaleY(1.5); opacity: 0.7; }
        }

        /* ANIMACIONET E REJA */
        /* 1. Hover-lift Animation */
        @keyframes gentle-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        /* 2. Shimmer Effect */
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }
        
        /* 3. Typewriter Cursor */
        @keyframes typewriter-cursor {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* 4. Bounce Soft */
        @keyframes bounce-soft {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        /* 5. Rotate Slow */
        @keyframes rotate-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* 6. Fade In Up */
        @keyframes fade-in-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 7. Scale In */
        @keyframes scale-in {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* 8. Slide In Right */
        @keyframes slide-in-right {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        /* 9. Ripple Effect */
        @keyframes ripple {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(4);
                opacity: 0;
            }
        }

        .animate-scroll { animation: scroll 40s linear infinite; }
        .pause-on-hover:hover { animation-play-state: paused; }
        .animate-float { animation: float 6s ease-in-out infinite; }
        .animate-spin-slow { animation: spin-slow 12s linear infinite; }
        .animate-writing { animation: writing 3s ease-in-out infinite; transform-origin: bottom center; }
        .animate-fade-in { animation: fadeIn 1s ease-out forwards; }
        .page-transition { animation: pageEnter 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        .loader-anim { animation: loaderGlow 1.5s ease-in-out infinite; }
        
        .timeline-item-visible-right { animation: slideInRight 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
        .timeline-item-visible-left { animation: slideInLeft 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
        
        .typing-cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            background-color: #06b6d4;
            animation: blink 1s step-end infinite;
            margin-left: 2px;
            vertical-align: middle;
        }

        .tilt-card { transform-style: preserve-3d; transition: transform 0.1s ease-out; }
        .tilt-content { transform: translateZ(20px); }

        body { font-family: 'Inter', sans-serif; overflow-x: hidden; scroll-behavior: smooth; }
        .font-serif { font-family: 'Playfair Display', serif; }
        .font-cinematic { font-family: 'Cinzel', serif; }
        .font-signature { font-family: 'Great Vibes', cursive; }
        .font-mono-receipt { font-family: 'Courier Prime', monospace; }

        .neon-text { text-shadow: 0 0 10px rgba(6, 182, 212, 0.7); }
        .glass-panel { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .glass-panel:hover { border-color: rgba(6, 182, 212, 0.3); box-shadow: 0 0 30px rgba(6, 182, 212, 0.1); }
        .bg-white .glass-panel { background: rgba(255, 255, 255, 0.6); border: 1px solid rgba(0, 0, 0, 0.05); }
        
        .receipt { background-image: radial-gradient(circle, #000 2px, transparent 2.5px); background-size: 100% 30px; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #06b6d4; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #0891b2; }
        canvas.signature-pad { touch-action: none; cursor: crosshair; }

        /* --- 6. STILI PËR PRINTIM (THEMES) --- */
        @media print {
            body * { visibility: hidden; }
            #print-area, #print-area * { visibility: visible; }
            #print-area {
                position: fixed; left: 0; top: 0; width: 100%; height: 100%;
                z-index: 99999; display: flex !important; align-items: center; justify-content: center;
                padding: 0; margin: 0; -webkit-print-color-adjust: exact; print-color-adjust: exact;
            }
            
            /* Përmirësime shtesë për printim */
            body {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                background: white !important;
                color: black !important;
            }
            
            .no-print {
                display: none !important;
            }
            
            a {
                color: black !important;
                text-decoration: underline !important;
            }
            
            .print-break-inside-avoid {
                break-inside: avoid !important;
            }
            
            .print-page-break-before {
                page-break-before: always !important;
            }
        }

        /* Print Themes Styles */
        .print-theme-classic { background-color: #fdfbf7; color: #000; border: 8px double #000; }
        .print-theme-minimal { background-color: #fff; color: #111; border: none; }
        .print-theme-gold { background-color: #fff; color: #000; border: 4px solid #d4af37; position: relative; }
        .print-theme-gold::before { content: ''; position: absolute; inset: 10px; border: 1px solid #d4af37; pointer-events: none; }
        .print-theme-dark { background-color: #1a1a1a !important; color: #e2e8f0 !important; border: 1px solid #333; position: relative; }
        .print-theme-dark .print-watermark { color: rgba(212, 175, 55, 0.1) !important; }
        .print-theme-dark h1 { color: #fff !important; }
        /* Shto këtë klasë të re poshtë print-theme-dark */
.print-theme-antique { 
    background-color: #fdf5e6 !important; /* Krem e lehtë / ngjyra e pergamene */
    color: #4a4a4a !important; 
    border: 10px solid #c9a75d !important; /* Kornizë antike */
    position: relative; 
    box-shadow: 0 0 0 5px #d4af37 inset;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" opacity=".3"><defs><pattern id="p" width="100" height="100" patternUnits="userSpaceOnUse"><path d="M50 0H0v50C50 50 50 0 50 0z" fill="%23c9a75d" opacity=".1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23p)"/></svg>') !important;
}

.print-theme-antique .print-watermark { 
    color: rgba(201, 167, 93, 0.15) !important; 
}
.print-theme-antique h1 { 
    color: #8B4513 !important; /* Ngjyrë kafe e errët */
}
/* Shto këtë klasë të re poshtë klasave ekzistuese të printimit */
.print-theme-robotics {
    /* Sfondi i Errët (stili i terminalit) */
    background-color: #0f172a !important; /* Slate 900 */
    color: #06b6d4 !important; /* Cyan 500 */
    border: 5px solid #22d3ee !important; /* Kornizë e theksuar */
    position: relative; 
    box-shadow: 0 0 0 10px #083344 inset;
    
    /* Efekt vije (Scanline/Screen effect) */
    background-image: linear-gradient(0deg, transparent 24%, rgba(34, 211, 238, 0.08) 25%, rgba(34, 211, 238, 0.08) 26%, transparent 27%, transparent 74%, rgba(34, 211, 238, 0.08) 75%, rgba(34, 211, 238, 0.08) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(34, 211, 238, 0.08) 25%, rgba(34, 211, 238, 0.08) 26%, transparent 27%, transparent 74%, rgba(34, 211, 238, 0.08) 75%, rgba(34, 211, 238, 0.08) 76%, transparent 77%, transparent);
    background-size: 100px 100px;
}

.print-theme-robotics .print-watermark { 
    /* Watermark-u i zbehtë në stil kodi */
    color: rgba(34, 211, 238, 0.05) !important; /* Cyan 400 zbehtë */
    font-family: 'Share Tech Mono', monospace !important; /* Fonti Mono për watermark */
}
.print-theme-robotics h1, 
.print-theme-robotics h3 { 
    /* Titujt me theks neon */
    color: #22d3ee !important; /* Cyan 400 */
    text-shadow: 0 0 5px rgba(34, 211, 238, 0.5) !important;
}
.print-theme-robotics .print-card {
    border: 2px solid #06b6d4;
    box-shadow: 0 0 20px rgba(6, 182, 212, 0.5);
}
        
        .print-card {
            width: 100%; max-width: 800px; min-height: 600px; padding: 60px;
            position: relative; display: flex; flex-direction: column; justify-content: space-between; overflow: hidden;
        }
        .print-watermark {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg);
            font-family: 'Cinzel', serif; font-size: 8rem; color: rgba(0,0,0,0.03);
            white-space: nowrap; pointer-events: none; z-index: 0;
        }
        .print-content { z-index: 1; position: relative; text-align: center; }
/* NEW PRINT THEMES */
.print-theme-romantic {
    background: linear-gradient(135deg, #fff5f7 0%, #ffe5ec 100%) !important;
    color: #831843 !important;
    border: 8px solid #ffc0cb !important;
}
.print-theme-romantic .print-watermark {
    color: rgba(255, 182, 193, 0.1) !important;
}

.print-theme-nature {
    background: linear-gradient(135deg, #f0fff4 0%, #d1fae5 100%) !important;
    color: #064e3b !important;
    border: 8px solid #10b981 !important;
}
.print-theme-nature .print-watermark {
    color: rgba(16, 185, 129, 0.08) !important;
}

.print-theme-neon {
    background: #000 !important;
    color: #a855f7 !important;
    border: 4px solid #a855f7 !important;
    box-shadow: 0 0 40px rgba(168, 85, 247, 0.6) inset !important;
}
.print-theme-neon .print-watermark {
    color: rgba(168, 85, 247, 0.05) !important;
    text-shadow: 0 0 20px rgba(168, 85, 247, 0.8) !important;
}
        /* Audio wave bar */
        .audio-wave-bar {
            animation: audio-wave 0.8s ease-in-out infinite;
        }
        
        /* Klasat e animacioneve të reja */
        .hover-lift {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .hover-lift:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .animate-gentle-pulse {
            animation: gentle-pulse 2s ease-in-out infinite;
        }
        
        .shimmer {
            background: linear-gradient(90deg, 
                rgba(255,255,255,0) 0%, 
                rgba(255,255,255,0.3) 50%, 
                rgba(255,255,255,0) 100%);
            background-size: 1000px 100%;
            animation: shimmer 2s infinite;
        }
        
        .typewriter-cursor {
            animation: typewriter-cursor 1s step-end infinite;
        }
        
        .animate-bounce-soft {
            animation: bounce-soft 1s ease-in-out infinite;
        }
        
        .animate-rotate-slow {
            animation: rotate-slow 20s linear infinite;
        }
        
        .animate-fade-in-up {
            animation: fade-in-up 0.6s ease-out forwards;
        }
        
        .animate-scale-in {
            animation: scale-in 0.3s ease-out forwards;
        }
        
        .animate-slide-in-right {
            animation: slide-in-right 0.4s ease-out forwards;
        }
        
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            animation: ripple 0.6s linear;
        }
        
        /* Accessibility: Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Performance: Will-change */
        .will-change-transform {
            will-change: transform;
        }
        .will-change-opacity {
            will-change: opacity;
        }
    </style>
    
    <script>window.process = { env: { NODE_ENV: 'production' } };</script>
</head>

<body class="bg-white text-slate-900 transition-colors duration-500 theme-transition">
    <div id="root"></div>

    <!-- Print Area Template (Hidden until print) -->
    <div id="print-area" style="display: none;"></div>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel" data-presets="react">
        const { useState, useEffect, useRef, useMemo, useCallback } = React;

        // --- ICONS ---
        const Icons = {
            Clock: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
            Heart: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" /></svg>,
            Download: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><polyline points="7 10 12 15 17 10" /><line x1="12" x2="12" y1="15" y2="3" /></svg>,
            Cart: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="8" cy="21" r="1" /><circle cx="19" cy="21" r="1" /><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12" /></svg>,
            Moon: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" /></svg>,
            Sun: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="4" /><path d="M12 2v2" /><path d="M12 20v2" /><path d="m4.93 4.93 1.41 1.41" /><path d="m17.66 17.66 1.41 1.41" /><path d="M2 12h2" /><path d="M20 12h2" /><path d="m6.34 17.66-1.41 1.41" /><path d="m19.07 4.93-1.41 1.41" /></svg>,
            Menu: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><line x1="4" x2="20" y1="12" y2="12" /><line x1="4" x2="20" y1="6" y2="6" /><line x1="4" x2="20" y1="18" y2="18" /></svg>,
            X: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M18 6 6 18" /><path d="m6 6 12 12" /></svg>,
            Feather: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z" /><line x1="16" x2="2" y1="8" y2="22" /><line x1="17.5" x2="9" y1="15" y2="15" /></svg>,
            Camera: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2 2V9a2 2 0 0 0-2-2h-3l-2.5-3z" /><circle cx="12" cy="13" r="3" /></svg>,
            Cpu: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="16" height="16" x="4" y="4" r="2" /><rect width="6" height="6" x="9" y="9" r="1" /><path d="M15 2v2" /><path d="M15 20v2" /><path d="M2 15h2" /><path d="M2 9h2" /><path d="M20 15h2" /><path d="M20 9h2" /><path d="M9 2v2" /><path d="M9 20v2" /></svg>,
            Mail: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="20" height="16" x="2" y="4" r="2" /><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" /></svg>,
            Facebook: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" /></svg>,
            Instagram: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="20" height="20" x="2" y="2" r="5" ry="5" /><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" /><line x1="17.5" x2="17.51" y1="6.5" y2="6.5" /></svg>,
            Twitter: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" /></svg>,
            Send: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m22 2-7 20-4-9-9-4Z" /><path d="M22 2 11 13" /></svg>,
            Music: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M9 18V5l12-2v13" /><circle cx="6" cy="18" r="3" /><circle cx="18" cy="16" r="3" /></svg>,
            Search: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="11" cy="11" r="8" /><line x1="21" x2="16.65" y1="21" y2="16.65" /></svg>,
            Globe: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10" /><line x1="2" x2="22" y1="12" y2="12" /><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1 4-10z" /></svg>,
            Share: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="18" cy="5" r="3" /><circle cx="6" cy="12" r="3" /><circle cx="18" cy="19" r="3" /><line x1="8.59" x2="15.42" y1="13.51" y2="17.49" /><line x1="15.41" x2="8.59" y1="6.51" y2="10.49" /></svg>,
            Whatsapp: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" /></svg>,
            ChevronDown: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m6 9 6 6 6-6" /></svg>,
            ArrowRight: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M5 12h14" /><path d="m12 5 7 7-7 7" /></svg>,
            Truck: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M10 17h4V5H2v12h3" /><path d="M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5" /><path d="M14 17h1" /><circle cx="7.5" cy="17.5" r="2.5" /><circle cx="17.5" cy="17.5" r="2.5" /></svg>,
            CheckCircle: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><polyline points="22 4 12 14.01 9 11.01" /></svg>,
            Eye: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" /><circle cx="12" cy="12" r="3" /></svg>,
            Bulb: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M9 18h6" /><path d="M10 22h4" /><path d="M12 2v1" /><path d="M12 6a7 7 0 0 1 3.8 11.9" /><path d="M12 6a7 7 0 0 0-3.8 11.9" /></svg>,
            Pen: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z" /></svg>,
            Quote: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/></svg>,
            Star: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" /></svg>,
            Award: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>,
            Printer: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="6 9 6 2 18 2 18 9" /><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2" /><rect x="6" y="14" width="12" height="8" /></svg>,
            SoundOn: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07" /></svg>,
            SoundOff: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><line x1="23" x2="17" y1="9" y2="15" /><line x1="17" x2="23" y1="9" y2="15" /></svg>,
            Activity: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12" /></svg>,
            Bookmark: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z" /></svg>,
            BookmarkFilled: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z" /></svg>
        };

        // --- Notification System ---
        const NotificationSystem = () => {
    const [notifications, setNotifications] = useState([]);
    
    const addNotification = useCallback((message, type = 'info', duration = 4000, action = null) => {
        const id = Date.now();
        const newNotification = {
            id,
            message,
            type,
            action,
            timestamp: new Date(),
            progress: 100
        };
        
        setNotifications(prev => [newNotification, ...prev.slice(0, 5)]);
        
        // Animate progress bar
        const interval = setInterval(() => {
            setNotifications(prev =>
                prev.map(n =>
                    n.id === id
                        ? { ...n, progress: Math.max(0, n.progress - (100 / (duration / 50))) }
                        : n
                )
            );
        }, 50);
        
        setTimeout(() => {
            clearInterval(interval);
            setNotifications(prev => prev.filter(n => n.id !== id));
        }, duration);
        
        return id;
    }, []);
    
    const removeNotification = (id) => {
        setNotifications(prev => prev.filter(n => n.id !== id));
    };
    
    return { notifications, addNotification, removeNotification };
};

        const NotificationContainer = ({ notifications, removeNotification, darkMode }) => {
            if (notifications.length === 0) return null;
            
            return (
                <div className="fixed top-20 right-4 z-[1000] space-y-3">
                    {notifications.map(notification => {
                        const bgColor = notification.type === 'success' ? 'bg-green-500/10 border-green-500/30' :
                                       notification.type === 'error' ? 'bg-red-500/10 border-red-500/30' :
                                       'bg-cyan-500/10 border-cyan-500/30';
                        
                        const textColor = notification.type === 'success' ? 'text-green-400' :
                                         notification.type === 'error' ? 'text-red-400' :
                                         'text-cyan-400';
                        
                        return (
                            <div 
                                key={notification.id} 
                                className={`p-4 rounded-lg border backdrop-blur-md animate-fade-in ${bgColor} ${darkMode ? 'text-white' : 'text-slate-900'}`}
                                style={{ animationDelay: '0.1s' }}
                            >
                                <div className="flex justify-between items-start">
                                    <div className="flex items-start gap-3">
                                        {notification.type === 'success' && <Icons.CheckCircle className={`w-5 h-5 mt-0.5 ${textColor}`} />}
                                        {notification.type === 'error' && <Icons.X className={`w-5 h-5 mt-0.5 ${textColor}`} />}
                                        {notification.type === 'info' && <Icons.Bulb className={`w-5 h-5 mt-0.5 ${textColor}`} />}
                                        <div>
                                            <p className="text-sm font-medium">{notification.message}</p>
                                            <p className="text-xs opacity-60 mt-1">
                                                {new Date(notification.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                                            </p>
                                        </div>
                                    </div>
                                    <button 
                                        onClick={() => removeNotification(notification.id)} 
                                        className="opacity-50 hover:opacity-100 transition-opacity"
                                    >
                                        <Icons.X className="w-4 h-4" />
                                    </button>
                                </div>
                            </div>
                        );
                    })}
                </div>
            );
        };

        // --- Social Share Suite ---
        const SocialShareSuite = ({ item, type, darkMode }) => {
    const [showSuite, setShowSuite] = useState(false);
            
            const platforms = [
                {
                    name: 'Facebook',
                    icon: Icons.Facebook,
                    color: 'hover:bg-blue-500 hover:text-white',
                    action: () => {
                        const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(`https://agimsherifi.com${item.url || '/'}`)}&quote=${encodeURIComponent(`"${item.text || item.title}" - Agim Sherifi`)}`;
                        window.open(url, '_blank');
                    }
                },
                {
                    name: 'Twitter',
                    icon: Icons.Twitter,
                    color: 'hover:bg-blue-400 hover:text-white',
                    action: () => {
                        const text = encodeURIComponent(`"${item.text || item.title}" - Agim Sherifi`);
                        const url = `https://twitter.com/intent/tweet?text=${text}&url=${encodeURIComponent(`https://agimsherifi.com${item.url || '/'}`)}`;
                        window.open(url, '_blank');
                    }
                },
                {
                    name: 'WhatsApp',
                    icon: Icons.Whatsapp,
                    color: 'hover:bg-green-500 hover:text-white',
                    action: () => {
                        const text = encodeURIComponent(`"${item.text || item.title}" - Agim Sherifi\n\n${`https://agimsherifi.com${item.url || '/'}`}`);
                        window.open(`https://wa.me/?text=${text}`, '_blank');
                    }
                },
                {
                    name: 'LinkedIn',
                    icon: (props) => <svg {...props} viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>,
                    color: 'hover:bg-blue-700 hover:text-white',
                    action: () => {
                        const url = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(`https://agimsherifi.com${item.url || '/'}`)}`;
                        window.open(url, '_blank');
                    }
                },
                {
                    name: 'Pinterest',
                    icon: (props) => <svg {...props} viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.372 0 12c0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.895 2.739.099.119.112.224.083.345-.09.375-.293 1.199-.334 1.363-.053.218-.173.265-.4.159-1.492-.694-2.424-2.875-2.424-4.627 0-3.769 2.737-7.229 7.892-7.229 4.144 0 7.365 2.953 7.365 6.899 0 4.117-2.595 7.431-6.199 7.431-1.211 0-2.348-.63-2.738-1.373 0 0-.599 2.282-.744 2.84-.282 1.084-1.064 2.456-1.549 3.235C9.584 23.815 10.77 24 12 24c6.627 0 12-5.373 12-12 0-6.628-5.373-12-12-12z"/></svg>,
                    color: 'hover:bg-red-600 hover:text-white',
                    action: () => {
                        const url = `https://pinterest.com/pin/create/button/?url=${encodeURIComponent(`https://agimsherifi.com${item.url || '/'}`)}&description=${encodeURIComponent(`"${item.text || item.title}" - Agim Sherifi`)}`;
                        window.open(url, '_blank');
                    }
                }
            ];
            
            const copyToClipboard = () => {
        navigator.clipboard.writeText(`https://agimsherifi.com${item.url || '/'}`);
        alert('Linku u kopjua në clipboard!');
    };
    
    return (
        <div className="relative">
            <button 
                onClick={() => setShowSuite(!showSuite)}
                className={`p-2 rounded-full ${darkMode ? 'bg-slate-800 text-slate-300 hover:bg-slate-700' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'} transition-colors`}
                aria-label="Shpërndaj"
            >
                <Icons.Share className="w-4 h-4" />
            </button>
            
            {showSuite && (
                <div 
                    className={`absolute ${type === 'quote' ? 'bottom-full left-full ml-12 -translate-y-12' : 'bottom-full left-0 mb-4'} p-3 rounded-lg shadow-xl z-[100] min-w-[200px] transform translate-x-[-4cm] rotate-0 ${darkMode ? 'bg-slate-800 border border-slate-700' : 'bg-white border border-slate-200'}`}
                >
                    <div className="grid grid-cols-3 gap-2 mb-3">
                        {platforms.map(platform => (
                            <button
                                key={platform.name}
                                onClick={platform.action}
                                className={`p-2 rounded flex flex-col items-center justify-center transition-all ${platform.color} ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}
                                title={`Shpërndaj në ${platform.name}`}
                            >
                                <platform.icon className="w-5 h-5 mb-1" />
                                <span className="text-xs">{platform.name}</span>
                            </button>
                        ))}
                    </div>
                    <button
                        onClick={copyToClipboard}
                        className={`w-full py-2 rounded text-sm font-bold ${darkMode ? 'bg-slate-700 hover:bg-slate-600 text-slate-300' : 'bg-slate-100 hover:bg-slate-200 text-slate-600'}`}
                    >
                        Kopjo Linkun
                    </button>
                </div>
            )}
        </div>
    );
};

        const TRANSLATIONS = {
            sq: {
                nav: { home: 'Kreu', quotes: 'Thëniet', poems: 'Poezi', gallery: 'Galeria', about: 'Rreth Meje', bookmarks: 'Të Ruajturat' }, // U shtua "Të Ruajturat"
                hero: { subtitle: "Aty ku logjika e ftohtë e kodit takohet me ngrohtësinë e pafundme të vargut.", readBtn: "Lexo Thëniet", galleryBtn: "Shiko Galerinë" },
                quotes: { title: "Fjalë të Gdhëndura", subtitle: "Një koleksion i mendimeve.", search: "Kërko thënie...", buy: "Bli Produktin", download: "Shkarko", share: "Shpërnda", readFull: "Lexo të Plotë" },
                newsletter: { title: "Abonohu në Newsletter", desc: "Merrni njoftime për poezi dhe projekte të reja.", placeholder: "Email-i juaj...", subscribe: "Abonohu", success: "Faleminderit për abonimin!" },
                footer: { rights: "Të gjitha të drejtat e rezervuara." },
                modal: { title: "Detajet e Porosisë", confirm: "Porosit", success: "Porosia u krye me sukses!", note: "Vonesa deri në 10 ditë pune. Konfirmimi ju dërgua në email." },
                request: { btn: "Porosit Vargje", title: "Kërko Tekst Personalizuar", desc: "Më trego idenë, unë e kthej në vargje.", type: "Lloji (Poezi/Këngë)", idea: "Ideja ose tema...", submit: "Dërgo Kërkesën" },
                poemDay: { title: "Njoftim", subtitle: "Frymëzim për të nisur ditën mbarë." },
                about: {
                    timelineTitle: "Rrugëtimi Im",
                    guestbookTitle: "Libri i Përshtypjeve",
                    signHere: "Nënshkruaj & Komento",
                    clearBtn: "Pastro",
                    submitBtn: "Dërgo Përshtypjen",
                    recentSignatures: "Çfarë thonë të tjerët",
                    leaveNote: "Shkruani një mesazh të shkurtër...",
                    certificatesTitle: "Certifikime & Arritje"
                },
                bookmarks: { title: "Të Ruajturat", empty: "Asnjë artikull i ruajtur akoma", remove: "Hiq", quote: "Thënie", poem: "Poezi", saved: "E ruajtur" }
            },
            en: {
                nav: { home: 'Home', quotes: 'Quotes', poems: 'Poems', gallery: 'Gallery', about: 'About', bookmarks: '' },
                hero: { subtitle: "Where cold logic of code meets the infinite warmth of verse.", readBtn: "Read Quotes", galleryBtn: "View Gallery" },
                quotes: { title: "Carved Words", subtitle: "A collection of thoughts.", search: "Search quotes...", buy: "Buy Product", download: "Download", share: "Share", readFull: "Read Full" },
                newsletter: { title: "Subscribe to Newsletter", desc: "Get updates on new poems and projects.", placeholder: "Your email...", subscribe: "Subscribe", success: "Thanks for subscribing!" },
                footer: { rights: "All rights reserved." },
                modal: { title: "Order Details", confirm: "Order", success: "Order successful!", note: "Delay up to 10 business days. Confirmation sent to email." },
                request: { btn: "Order Verses", title: "Request Custom Text", desc: "Tell me the idea, I turn it into verses.", type: "Type (Poem/Song)", idea: "Idea or theme...", submit: "Send Request" },
                poemDay: { title: "Poem of the Day", subtitle: "Inspiration to start your day right." },
                about: {
                    timelineTitle: "My Journey",
                    guestbookTitle: "Guestbook",
                    signHere: "Sign & Comment",
                    clearBtn: "Clear",
                    submitBtn: "Submit Impression",
                    recentSignatures: "What others say",
                    leaveNote: "Write a short message...",
                    certificatesTitle: "Certifications & Achievements"
                },
                bookmarks: { title: "Bookmarks", empty: "No bookmarks yet", remove: "Remove", quote: "Quote", poem: "Poem", saved: "Saved" }
            }
        };

        const DATA = {
            profile: {
                name: "Agim Sherifi",
                titles: ["Mësimdhënës", "Poet", "Fotograf", "Mendimtar"],
            },
            socials: [
                { IconCmp: Icons.Facebook, link: "https://facebook.com/agimdsherifi" },
                { IconCmp: Icons.Instagram, link: "https://instagram.com/agimdsherifi" },
                { IconCmp: Icons.Twitter, link: "https://twitter.com/agimdsherifi" }
            ],
            defaultPoem: {
                title: "Zgjimi",
                content: "Dielli puth tokën me rreze të arta,\nNdërsa ëndrrat treten si vesa mbi bar.\nSot është një faqe e bardhë, e pa shkruar,\nKu ti je autori, lapsi dhe zjarri."
            },
            quotes: [
                { 
                    id: 11, 
                    text: "Nga agimi...", 
                    category: "Motivim", 
                    likes: 134, 
                    price: "12€", 
                    image: "./images/thenie/sunset.png", 
                    fullText: "Nga agimi deri në perëndim, është drita Yte, Zot, që na jep gjallërim!",
                    seoTitle: "agimi e perendim - Agim Sherifi",
                    seoDescription: "Nga agimi deri në perëndim, drita e Zotit na jep forcë dhe gjallëri. Një thënie frymëzuese nga Agim Sherifi.",
                    url: "/thenie/agimi-dhe-perendim"
                },
                { 
                    id: 10, 
                    text: "Ç'kërkon lumturi kur...", 
                    category: "Motivim", 
                    likes: 324, 
                    price: "22€", 
                    image: "./images/thenie/happyness.png", 
                    fullText: "Ç'kërkon lumturi nga njerëzit, kur ti kurr nuk e lumturon askend!",
                    seoTitle: "Ç'kerkon lumturi - Agim Sherifi",
                    seoDescription: "Ç'kerkon lumturi nga të tjerët kur nuk e ofron vetë? Një thënie reflektuese nga Agim Sherifi.",
                    url: "/thenie/ckerkon-lumturi"
                },
                { 
                    id: 9, 
                    text: "Teknologjia dhe litari", 
                    category: "Edukimi", 
                    likes: 194, 
                    price: "18€", 
                    image: "./images/thenie/tech.png", 
                    fullText: "Teknologjia është një litar, nëse e përdorësh për të ngjitur, arrin majat; nëse e përdor për të varur, bie në humnerë.",
                    seoTitle: "Teknologjia dhe litari - Agim Sherifi",
                    seoDescription: "Teknologjia mund të jetë një mjet për sukses ose dështim, varësisht se si e përdorim. Një thënie nga Agim Sherifi.",
                    url: "/thenie/teknologjia-dhe-litari"
                },
                { 
                    id: 8, 
                    text: "Prania e miqve", 
                    category: "Dashuria", 
                    likes: 224, 
                    price: "15€", 
                    image: "./images/thenie/cheers.jpg", 
                    fullText: "Prania e miqve, nga mëngjesi deri në mbrëmje, është kënaqësia që zemra nuk e numëron dot. Ka njerëz që nuk sjellin vetëm shoqëri, por buzqeshje, dritë dhe ngrohtësi… dhe këta njerëz vlejnë më shumë se çdo monedhë e pasuri. @everyone 🥂",
                    seoTitle: "Prania e miqve - Agim Sherifi",
                    seoDescription: "Miqtë e vërtetë janë thesari më i çmuar në jetë. Një thënie nga Agim Sherifi.",
                    url: "/thenie/prania-e-miqve"
                },
                { 
                    id: 7, 
                    text: "Kënaqësia e nefsit", 
                    category: "Filozofi & Robotikë", 
                    likes: 124, 
                    price: "15€", 
                    image: "./images/thenie/deepsea.png", 
                    fullText: "Kënaqësia e nefsit është thellë, thellë nën det, nëse zhytesh, ke për t’u mbyt e jo për ta arrit!",
                    seoTitle: "Nefsi - Agim Sherifi",
                    seoDescription: "Nefsi është një det i thellë që mund të të mbytë nëse nuk e kontrollon. Një thënie filozofike nga Agim Sherifi.",
                    url: "/thenie/knaqesia-e-nefsit"
                },
                { 
                    id: 6, 
                    text: "Paraja fundi më i...", 
                    category: "Filozofi & Robotikë", 
                    likes: 124, 
                    price: "15€", 
                    image: "./images/thenie/paraja.png", 
                    fullText: "Paraja fundi me i hidhur se miza në qafë, kur e ke të fituar me djersë, por e shpenzon për gjëra pa vlerë. Kujdes se si e shfrytëzon pasurinë tënde, sepse ajo mund të të bëjë rob ose të të çlirojë.",
                    seoTitle: "Paraja dhe liria - Agim Sherifi",
                    seoDescription: "Paraja mund të jetë një mjet për liri ose një zinxhir që të bën rob. Një thënie nga Agim Sherifi.",
                    url: "/thenie/paraja-fundi"
                },
                { 
                    id: 5, 
                    text: "Duke prit fundin e javës...", 
                    category: "Jeta", 
                    likes: 89, 
                    price: "15€", 
                    image: "./images/thenie/moon.png", 
                    fullText: "Duke prit fundin e javës, e duke prit fundin e muajit, po i afrohemi fundit që s'ka kthim. Na fal e na beko me shoqëri, o Madhëri!",
                    seoTitle: "Duke prit fundin e javës - Thënie për jetën",
                    seoDescription: "Duke pritur fundin e javës dhe muajit, ne afrohemi me fundin e jetës. Një thënie reflektuese për jetën.",
                    url: "/thenie/fundi-i-javes"
                },
                { 
                    id: 4, 
                    text: "Dashurinë që ta fala...", 
                    category: "Dashuria", 
                    likes: 210, 
                    price: "15€", 
                    image: "./images/thenie/dashurinelloc.png", 
                    fullText: "Dashurinë që ta fala, mos e hidh në llok.Veç ta dish, nuk kthehesh në zemër kurrë siç ishe sot.",
                    seoTitle: "Dashuria nuk është algoritëm - Agim Sherifi",
                    seoDescription: "Një thënie e bukur për dashurinë dhe teknologjinë nga poeti dhe inxhinieri Agim Sherifi.",
                    url: "/thenie/dashuria-algoritëm"
                },
                { 
                    id: 3, 
                    text: "Inati dhe xhelozia", 
                    category: "Motivim", 
                    likes: 156, 
                    price: "15€", 
                    image: "./images/thenie/deffault2.png", 
                    fullText: "Mos kini inat e xhelozi për asnjë njeri.Çdo orë jepni buzëqeshje e dashuri.Jini vetvetja dhe mos u krahasoni me asnjë njeri.",
                    seoTitle: "E ardhmja dhe shpresa - Thënie motivuese",
                    seoDescription: "Thënie e fuqishme motivuese për të ardhmen dhe lidhjen me shpresën.",
                    url: "/thenie/inati-dhe-xhelozia"
                },
                { 
                    id: 2, 
                    text: "Mëshira hyjnore", 
                    category: "Edukimi", 
                    likes: 92, 
                    price: "15€", 
                    image: "./images/thenie/motiv.png", 
                    fullText: "Kush dyshon në mëshirë hyjnore,le të shohë ata pa zemër e pa dritë,që ende ecin në këtë botë mizore —veç Zoti i mban, se për ne, akshami s'i kish nxanë!Mirë, kështu kurr s'ka me u kanë!",
                    seoTitle: "Mëshira hyjnore - Agim Sherifi",
                    seoDescription: "Meshira hyjnore është një dhuratë e madhe që na udhëheq në jetë. Një thënie nga Agim Sherifi.",
                    url: "/thenie/meshira-hyjnore"
                },
                { 
                    id: 1, 
                    text: "Nën rrezet e diellit", 
                    category: "Jeta", 
                    likes: 92, 
                    price: "13€", 
                    image: "./images/thenie/rrezedielli.png", 
                    fullText: "Nën rrezet e arta të diellit, mbi dëborën e bardhë, në ftohtësinë e pyjeve, zemra ka nevojë edhe për fjalë. Njeriun gojëëmbël mbaje në jetë, po e humbe, vështirë ke për të gjetë.",
                    seoTitle: "Rrezet e diellit - Thënie nga Agim Sherifi",
                    seoDescription: "Rrezet e diellit sjellin ngrohtësi dhe shpresë në jetën tonë. Një thënie nga Agim Sherifi.",
                    url: "/thenie/rezet-e-diellit"
                }
            ],
            poems: [
                { 
                    id: 5, 
                    title: "Mërgimi", 
                    preview: "Na ndau na thau...", 
                    content: "Na ndau, na thau,\nky kurbet i shkretë,\nnë çdo anë bote\njemi shpërndarë përjetë.\n\nU larguam pa kthim,\nlindje e perëndim,\nsi prehri i nënës\ns’ka askund qetësim.\n\nNga mundi babës\ntash po rrjedhin lot,\natje ku isha\ns'ia dija vlerën dot.\n\nToka më thërret,\nzemra më digjet flakë,\ngjurmët e fëmijërisë\nnë andërr m’i sjell prapë.", 
                    date: "21 Nëntor, 2025", 
                    rating: 4.9,
                    inspiration: "Kjo poezi u shkruajt në orën 3 të mëngjesit, duke menduar për vendlindjen dhe miqtë që u tretën.",
                    seoTitle: "Mërgimi - Poezi nga Agim Sherifi",
                    seoDescription: "Poezi e thellë për gurbetin dhe njerëzimin, shkruar nga Agim Sherifi. Lexoni më shumë poezi të autorit.",
                    url: "/poezi/mërgimi"
                },
                { 
                    id: 4, 
                    title: "Mallë", 
                    preview: "Rridhni o ju sy...", 
                    content: "Rridhni o ju sy pa ndërprer\nder' atë ditë sa të hyj nën dhe\nmos pe shuaj këtë mall\nqë është i madh sa një mal\n\nQaj moj zemër o me lot\nnuk do të kthehem më si sot\nkjo vuajtje pa mbarim\nndoshta në varr gjej shpëtim\n\nSa kam ymer me jetu\nkur vjen vdekja me pushu\nplagët që i mora\na kanë për t’mu shëru?\n\nAnkthin që përjetova\nshpejt nga gjumi u zgjova\nëndërr e trishtë\ne për dikë realitet i brishtë!", 
                    date: "04 Shtator, 2025", 
                    rating: 4.85,
                    inspiration: "Bazuar në jetë të ralla'",
                    seoTitle: "Malli - Poezi nga Agim Sherifi",
                    seoDescription: "Poezi unike që lidh emocionin dhe ndjenjat e mallëngjimit",
                    url: "/poezi/mallë"
                },
                { 
                    id: 3, 
                    title: "Ramazani pa nënën", 
                    preview: "Etjen nuk po e shuan...", 
                    content: "Etjen nuk po e shuan as uji,\nurinë nuk po e ngopin as shumë ushqime.\nRamazani i parë pa nënën time,\nmërzi e madhe e zemrës sime.\n\nMë e rëndë mërzia sesa uria,\nderë pas dere po kërkoj,\nnga syfyri e deri në iftar,\nzërin e nënës nuk po e dëgjoj.\n\nDita e parë pa syfyr po agjëroj,\nmë mungoi thirrja e nënës që të më zgjoj.\nmë mungon ajo dritë e syfyr e iftar,\nKy Ramazan nuk është si më parë.\n\nRridhni, o lot, nga sytë e mi,\nnëna pushon në varr tani.", 
                    date: "16 Mars, 2025", 
                    rating: 5.0,
                    inspiration: "Një Ramazan pa nënën time të dashur...",
                    seoTitle: "Ramazani pa nënën - Poezi melankolike nga Agim Sherifi",
                    seoDescription: "Poezi që shpreh dashurinë dhe dhimbjen, një reflektim i ndjenjave të thella njerëzore.",
                    url: "/poezi/ramazani-pa-nenen"
                },
                { 
                    id: 2, 
                    title: "Falemnderit Zot", 
                    preview: "Jam ndalë pak me të falënderu shumë...", 
                    content: "Jam ndalë pak me të falënderu shumë, o Zot,\npër të mirat që i kam, s'po ia di vlerën dot.\nDuke kërkuar çdo gjë e mos me ditë me u ngopë,\nharrova se sa i vogël jam unë në këtë tokë!\n\nU mbushën sytë me lot, pse nuk të deshta asnjëherë si sot,\nPrej madhërisë tënde nuk jam zhgenjy, ula kokën nje sexhde per Ty,\nTrupi mu rrënqeth e zemra po vajton, a kam jetë ende të jetoj,\nmë tepër Zotin në sexhde e lutje ta falënderoj.\n\nFaleminderit Zot, po marr frymë edhe sot,\nbekimet që TI m’i dhe, unë s’mund t’i paguaj dot!\n\nFaleminderit Zot, po marr frymë edhe sot,\nbekimet që ti m’i dhe, unë s’mund t’i paguaj dot!\n\nNë errësirë kur rashë, vetëm dritën tënde pashë,\ne vërtetova që s’kam tjetër shpëtim,\ne të kthehem vetëm te ti për falënderim.\n\nKush nuk don e nuk vlerëson atë dritë që me sy hapur shikon,\nai është errësu n'shpirt e është verbu në zemër,\ndo të vuan përjetë derisa t’i kthehet falënderimit të vërtetë.\n\nFaleminderit Zot, po marr frymë edhe sot,\nbekimet që TI m’i dhe, unë s’mund t’i paguaj dot!\n\nPër TY është pak edhe nëse sytë kurrë nuk thahen me lot, Elhamdulilah o Zot!", 
                    date: "04 Nëntor, 2024", 
                    rating: 4.9,
                    inspiration: "Të mirat te cilat i marrim për të mirëqena në jetë.",
                    seoTitle: "Faleminderit Zot - Poezi e Thellë Emocionale",
                    seoDescription: "Poezi që shpreh dashurinë dhe dhimbjen, një reflektim i ndjenjave të thella njerëzore.",
                    url: "/poezi/faleminderit-Zot"
                },
                { 
                    id: 1, 
                    title: "Dashuri në lloç", 
                    preview: "Sa dashuri kam hedhur në...", 
                    content: "Sa dashuri kam hedhur në lloç,\ne as që mërzitem dot! \nPër mua ajo nuk është bosh,\nshpërblimin pres prej të Madhit Zot,\nse dashurinë s’ma blen askush dot. \nUnë nuk jetoj kot,\npër kë di, e për kë don,\njo veç dashurinë,\npor edhe zemrën kam me ia dhonë.\nTrue love never will gone!", 
                    date: "12 Shtator, 2025", 
                    rating: 4.7,
                    inspiration: "Dashuria e vërtetë nuk matet me asgjë tjetër përveç me zemër.",
                    seoTitle: "Dashuri në lloç - Poezi nga Agim Sherifi",
                    seoDescription: "Poezi unike që lidh emocionin dhe ndjenjat e dashurisë së vërtetë.",
                    url: "/poezi/dashuri-ne-lloc"
                }
            ],
            photos: [
                { id: 10, url: "./images/galeri/berceca.jpg", title: "Bërçeca", category: "Natyrë", price: "49€", description: "Në Bërçecën e bukur" },
                { id: 9, url: "./images/galeri/majatitos.jpg", title: "Maja Titos", category: "Natyrë", price: "49€", description: "Pika më e lartë në Maqedoninë e Veriut" },
                { id: 8, url: "./images/galeri/adrian.jpg", title: "AdrianL Photography", category: "Natyrë", price: "49€", description: "Duke shkrepur bashkë me Adrian Limani" },
                { id: 7, url: "./images/galeri/7etapa.jpg", title: "Perendimi i Diellit", category: "Natyrë", price: "49€", description: "Sunset mbi malet e Raincës" },
                { id: 6, url: "./images/galeri/alone.jpg", title: "Vetmia", category: "Teknologji", price: "75€", description: "Vetmia në sunset" },
                { id: 5, url: "./images/galeri/diellibasket.jpg", title: "Basket me Diellin", category: "Natyrë", price: "60€", description: "Loja me Diellin" },
                { id: 4, url: "./images/galeri/fundi.jpg", title: "Fundi në Hije", category: "Portret", price: "80€", description: "Studim mbi dritën dhe hijen." },
                { id: 3, url: "./images/galeri/kercim.jpg", title: "Kërcim", category: "Peizazh", price: "55€", description: "Kërcim mbi Diell" },
                { id: 2, url: "./images/galeri/shtuli.jpg", title: "Silhoute", category: "Peizazh", price: "55€", description: "Errësia ne SEEU" },
                { id: 1, url: "./images/galeri/shtuli1.jpg", title: "Drita në errësirë", category: "Peizazh", price: "55€", description: "Një dritë aty ku duhet" },
            ],
            certificates: [
                { id: 1, url: "./images/certifikate/Istanbul Education Summit.jpg", title: "Istanbul Education Summit 2025" },
                { id: 2, url: "./images/certifikate/Sasmsung Turkey Festival.jpg", title: "Samsun Turkey Festival" },
                { id: 3, url: "./images/certifikate/KML Finale 23-24.jpg", title: "KML Final 2024" },
                { id: 4, url: "./images/certifikate/Full Stack Web Developer.png", title: "Full Stack Web Developer" },
                { id: 5, url: "./images/certifikate/7 Marsi 2025 Maarif_page-0001.jpg", title: "IMSK" },
                { id: 6, url: "./images/certifikate/Istanbul Summit 2024.jpg", title: "IST Summit 2024" },
            ],
            timeline: [
                { year: "2015", title: "Hapi i Parë në Art", desc: "Shkrova thënien dhe poezinë time të parë, duke hapur derën e krijimtarisë që më shoqëron edhe sot.", image: "./images/etapat/hapi1.png" },
                { year: "2017", title: "Rrënjët e Teknologjisë", desc: "Nisa studimet në teknologji, duke ndërtuar themelet e pasionit tim për ICT dhe inovacionin.", image: "./images/etapat/rrenjet_teknologjis.png" },
                { year: "2019", title: "Zbulimi i Drejtimit", desc: "U thellova në botën e programimit dhe robotikës, duke e kthyer kureshtjen time në aftësi reale.", image: "./images/etapat/drejtimi.png" },
                { year: "2021", title: "Dalja në dritë", desc: "Fillova të ndaj publikisht shkrimet dhe fotot e mia, duke krijuar identitetin tim si autor dhe fotograf.", image: "./images/etapat/dalja_ne_drit.png" },
                { year: "2024", title: "Thirrja e Mësuesit", desc: "U bëra mësues, duke udhëhequr brezat e rinj drejt teknologjisë, krijimtarisë dhe të ardhmes së tyre.", image: "./images/etapat/thirrja_msusit.png" }
            ],
            guestbook: [
                { id: 1, name: "Arbeni", message: "Ngadalë por fenomenal! Një faqe që flet me shpirt.", signature: null, date: "2 ditë më parë" },
                { id: 2, name: "Elsa K.", message: "Më pëlqen shumë se si ke gërshetuar teknologjinë me artin. Suksese!", signature: null, date: "1 javë më parë" },
                { id: 3, name: "Driloni", message: "Vazhdo kështu profesor, inspirim për të gjithë ne.", signature: null, date: "2 javë më parë" }
            ]
        };

        // --- SEO Manager Component ---
        const SEOManager = ({ title, description, url, type }) => {
            useEffect(() => {
                // Update document title
                if (title) {
                    document.title = title + " | Agim Sherifi";
                }
                
                // Update meta description
                const metaDesc = document.querySelector('meta[name="description"]');
                if (metaDesc && description) {
                    metaDesc.setAttribute('content', description);
                }
                
                // Update Open Graph tags
                const ogTitle = document.querySelector('meta[property="og:title"]');
                const ogDesc = document.querySelector('meta[property="og:description"]');
                const ogUrl = document.querySelector('meta[property="og:url"]');
                const ogType = document.querySelector('meta[property="og:type"]');
                
                if (ogTitle && title) ogTitle.setAttribute('content', title);
                if (ogDesc && description) ogDesc.setAttribute('content', description);
                if (ogUrl && url) ogUrl.setAttribute('content', `https://agimsherifi.com${url}`);
                if (ogType && type) ogType.setAttribute('content', type);
                
                // Update Twitter tags
                const twitterTitle = document.querySelector('meta[property="twitter:title"]');
                const twitterDesc = document.querySelector('meta[property="twitter:description"]');
                
                if (twitterTitle && title) twitterTitle.setAttribute('content', title);
                if (twitterDesc && description) twitterDesc.setAttribute('content', description);
                
                // Update URL in browser history (for sharing)
                if (url) {
                    window.history.replaceState(null, title, url);
                }
                
                // Add canonical link
                let canonicalLink = document.querySelector('link[rel="canonical"]');
                if (!canonicalLink) {
                    canonicalLink = document.createElement('link');
                    canonicalLink.rel = 'canonical';
                    document.head.appendChild(canonicalLink);
                }
                if (url) {
                    canonicalLink.href = `https://agimsherifi.com${url}`;
                }
                
            }, [title, description, url, type]);
            
            return null;
        };

        // --- HOOK PER BOOKMARKS ---
        const useBookmarks = () => {
            const [bookmarks, setBookmarks] = useState(() => {
                const saved = localStorage.getItem('agim_portfolio_bookmarks');
                return saved ? JSON.parse(saved) : [];
            });

            const addBookmark = (item, type) => {
                const newBookmark = {
                    id: `${type}_${item.id}_${Date.now()}`,
                    itemId: item.id,
                    type,
                    item,
                    date: new Date().toISOString()
                };
                
                const updated = [...bookmarks, newBookmark];
                setBookmarks(updated);
                localStorage.setItem('agim_portfolio_bookmarks', JSON.stringify(updated));
                return true;
            };

            const removeBookmark = (id) => {
                const updated = bookmarks.filter(b => b.id !== id);
                setBookmarks(updated);
                localStorage.setItem('agim_portfolio_bookmarks', JSON.stringify(updated));
            };

            const isBookmarked = (itemId, type) => {
                return bookmarks.some(b => b.itemId === itemId && b.type === type);
            };

            const getBookmarkId = (itemId, type) => {
                const bookmark = bookmarks.find(b => b.itemId === itemId && b.type === type);
                return bookmark ? bookmark.id : null;
            };

            return { bookmarks, addBookmark, removeBookmark, isBookmarked, getBookmarkId };
        };

        // --- Sistemi i thjeshtë audio ---
        const useSimpleAudio = () => {
            const [isPlaying, setIsPlaying] = useState(false);
            const audioRef = useRef(null);
            
            // Krijoni një audio element në fillim
            useEffect(() => {
                // Përdorim një skedë ambientale të thjeshtë
                audioRef.current = new Audio('https://commondatastorage.googleapis.com/codeskulptor-assets/Epoq-Lepidoptera.ogg');
                audioRef.current.loop = true;
                audioRef.current.volume = 0.3;
                
                return () => {
                    if (audioRef.current) {
                        audioRef.current.pause();
                        audioRef.current = null;
                    }
                };
            }, []);
            
            const togglePlay = () => {
                if (!audioRef.current) return;
                
                if (isPlaying) {
                    audioRef.current.pause();
                    setIsPlaying(false);
                } else {
                    audioRef.current.play().catch(e => {
                        console.log("Audio play failed:", e);
                        // Nëse dështon, provo një burim tjetër
                        audioRef.current.src = 'https://assets.mixkit.co/music/preview/mixkit-driving-ambition-32.mp3';
                        audioRef.current.play();
                    }).then(() => {
                        setIsPlaying(true);
                    });
                }
            };
            
            return { isPlaying, togglePlay };
        };

        // --- COMPONENTS ---
        const IntroLoader = ({ onComplete }) => {
            const [visible, setVisible] = useState(true);
            useEffect(() => {
                const timer = setTimeout(() => {
                    setVisible(false);
                    setTimeout(onComplete, 500); 
                }, 1000);
                return () => clearTimeout(timer);
            }, []); 

            return (
                <div className={`fixed inset-0 z-[9999] bg-black flex items-center justify-center transition-opacity duration-500 ${visible ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}>
                    <div className="text-center">
                        <div className="font-cinematic text-8xl text-cyan-500 loader-anim" style={{textShadow: "0 0 10px rgba(6,182,212,0.8)"}}>
                            A.S
                        </div>
                    </div>
                </div>
            );
        };

        // --- Smart Recommendations ---
        const SmartRecommendations = ({ darkMode, currentItemId, currentItemType }) => {
            const [recommendations, setRecommendations] = useState([]);
            
            useEffect(() => {
                // Analizon aktivitetin dhe gjeneron rekomandime
                let items = [];
                
                if (currentItemType === 'quote') {
                    // Gjen thënie të ngjashme sipas kategorisë
                    const currentQuote = DATA.quotes.find(q => q.id === currentItemId);
                    if (currentQuote) {
                        items = DATA.quotes
                            .filter(q => q.category === currentQuote.category && q.id !== currentItemId)
                            .slice(0, 3);
                    }
                } else if (currentItemType === 'poem') {
                    // Gjen poezi me rating të lartë
                    items = DATA.poems
                        .filter(p => p.rating > 4.0 && p.id !== currentItemId)
                        .sort((a, b) => b.rating - a.rating)
                        .slice(0, 3);
                }
                
                // Nëse nuk ka të ngjashme, kthen thënie të rastësishme të popullarizuara
                if (items.length === 0) {
                    items = DATA.quotes
                        .sort((a, b) => b.likes - a.likes)
                        .slice(0, 3);
                }
                
                setRecommendations(items);
            }, [currentItemId, currentItemType]);
            
            if (recommendations.length === 0) return null;
            
            return (
                <div className={`mt-12 p-6 rounded-2xl ${darkMode ? 'bg-slate-900/50 border border-cyan-900/30' : 'bg-cyan-50 border border-cyan-100'}`}>
                    <div className="flex items-center gap-3 mb-6">
                        <Icons.Star className="w-6 h-6 text-yellow-500" />
                        <h3 className={`text-xl font-serif font-bold ${darkMode ? 'text-white' : 'text-slate-900'}`}>
                            Mund T'ju Pëlqejnë Gjithashtu
                        </h3>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        {recommendations.map(item => (
                            <div key={item.id} className={`p-4 rounded-lg ${darkMode ? 'bg-slate-800/30 hover:bg-slate-800/50' : 'bg-white hover:bg-cyan-100/50'} transition-colors cursor-pointer group`} onClick={() => window.location.hash = `#${item.id}`}>
                                <p className={`italic text-sm mb-2 ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>
                                    "{item.text ? item.text.substring(0, 60) + '...' : item.title}"
                                </p>
                                <div className="flex justify-between items-center mt-3">
                                    <span className={`text-xs font-bold ${darkMode ? 'text-cyan-400' : 'text-cyan-600'}`}>
                                        {item.category || 'Poezi'}
                                    </span>
                                    <span className={`text-xs ${darkMode ? 'text-slate-500' : 'text-slate-400'}`}>
                                        {item.likes ? `${item.likes} ❤️` : `⭐ ${item.rating}`}
                                    </span>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // --- Optimized Image ---
        const OptimizedImage = ({ src, alt, className, lazy = true, ...props }) => {
    const [isLoaded, setIsLoaded] = useState(false);
    const [hasError, setHasError] = useState(false);
    const imgRef = useRef(null);
    
    useEffect(() => {
        if (!lazy) {
            const img = new Image();
            img.src = src;
            img.onload = () => setIsLoaded(true);
            img.onerror = () => setHasError(true);
            return;
        }
        
        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = new Image();
                        img.src = src;
                        img.onload = () => setIsLoaded(true);
                        img.onerror = () => setHasError(true);
                        observer.unobserve(entry.target);
                    }
                });
            },
            { threshold: 0.1, rootMargin: '50px' }
        );
        
        if (imgRef.current) {
            observer.observe(imgRef.current);
        }
        
        return () => {
            if (imgRef.current) {
                observer.unobserve(imgRef.current);
            }
        };
    }, [src, lazy]);
    
    return (
        <div ref={imgRef} className={`relative overflow-hidden ${className}`}>
            {/* SVG Placeholder */}
            {!isLoaded && !hasError && (
                <div className="absolute inset-0 animate-pulse bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-800 dark:to-gray-900">
                    <div className="absolute inset-0 flex items-center justify-center opacity-30">
                        <Icons.Camera className="w-12 h-12 text-gray-400" />
                    </div>
                </div>
            )}
            
            {/* Imazhi aktual */}
            <img
                src={isLoaded ? src : ''}
                alt={alt}
                loading={lazy ? "lazy" : "eager"}
                className={`transition-all duration-500 ${isLoaded ? 'opacity-100 scale-100' : 'opacity-0 scale-105'} ${className}`}
                {...props}
            />
            
            {/* Fallback */}
            {hasError && (
                <div className="absolute inset-0 flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-900 p-4">
                    <Icons.Camera className="w-16 h-16 mb-2 text-gray-400" />
                    <span className="text-sm text-gray-500 text-center">Imazhi nuk u ngarkua</span>
                </div>
            )}
        </div>
    );
};

        // --- Error Boundary ---
        class ErrorBoundary extends React.Component {
            constructor(props) {
                super(props);
                this.state = { hasError: false, error: null, errorInfo: null };
            }
            
            static getDerivedStateFromError(error) {
                return { hasError: true };
            }
            
            componentDidCatch(error, errorInfo) {
                console.error('Portfolio Error:', error, errorInfo);
                this.setState({
                    error: error,
                    errorInfo: errorInfo
                });
            }
            
            handleReload = () => {
                window.location.reload();
            };
            
            handleGoHome = () => {
                window.location.href = '/';
            };
            
            render() {
                if (this.state.hasError) {
                    return (
                        <div className="min-h-screen flex items-center justify-center bg-slate-900 text-white p-8">
                            <div className="max-w-md text-center">
                                <div className="mb-6">
                                    <div className="text-6xl mb-4">😔</div>
                                    <h1 className="text-3xl font-bold mb-2">Diçka shkoi keq</h1>
                                    <p className="text-slate-400 mb-6">
                                        Portofoli ka hasur në një gabim të papritur. 
                                        Ne kemi njoftuar për këtë dhe do ta rregullojmë sa më shpejt.
                                    </p>
                                </div>
                                
                                <div className={`p-4 rounded-lg bg-red-900/20 border border-red-700/30 mb-6 text-left font-mono text-sm`}>
                                    <p className="font-bold text-red-400 mb-2">Detajet e Gabimit:</p>
                                    <p className="text-slate-300">{this.state.error?.toString()}</p>
                                </div>
                                
                                <div className="flex flex-col sm:flex-row gap-4 justify-center">
                                    <button
                                        onClick={this.handleReload}
                                        className="px-6 py-3 bg-cyan-600 text-white rounded-lg font-bold hover:bg-cyan-500 transition-colors"
                                    >
                                        Rifresko Faqen
                                    </button>
                                    <button
                                        onClick={this.handleGoHome}
                                        className="px-6 py-3 border border-cyan-600 text-cyan-400 rounded-lg font-bold hover:bg-cyan-600/10 transition-colors"
                                    >
                                        Kthehu në Faqen Kryesore
                                    </button>
                                </div>
                                
                                <p className="mt-8 text-sm text-slate-500">
                                    Nëse problemi vazhdon, ju lutem na kontaktoni në 
                                    <a href="mailto:a.sherifi@kosova.maarifschools.org" className="text-cyan-400 ml-1">contact@agimsherifi.com</a>
                                </p>
                            </div>
                        </div>
                    );
                }
                
                return this.props.children;
            }
        }

        const PrintThemeSelector = ({ isOpen, onClose, item, type }) => {
    if (!isOpen || !item) return null;
    
    // Funksioni për gjenerimin e QR Code
    const generateQRCode = (text, size = 120, isDark = false) => {
        const color = '000000'; 
        const bgcolor = 'ffffff'; 
        return `https://api.qrserver.com/v1/create-qr-code/?size=${size}x${size}&data=${encodeURIComponent(text)}&color=${color}&bgcolor=${bgcolor}&format=png`;
    };
    
    
    const printNow = (themeClass) => {
        const printArea = document.getElementById('print-area');
        if (!printArea) return;
        
        // --- 1. KONFIGURIMI I FONTEVE DHE STILEVE PËR ÇDO TEMË ---
        let fonts = {
            title: "'Playfair Display', serif",
            body: "'Merriweather', serif",
            watermark: "'Cinzel', serif",
            meta: "'Courier Prime', monospace",
            signature: "'Great Vibes', cursive"
        };

        // Përcaktojmë ngjyrat dhe fontet specifike sipas temës
        const isDark = themeClass.includes('dark');
        let bgPrintColor = '#ffffff';
        let watermarkStyle = 'color: rgba(0,0,0,0.03);';
        
        if (themeClass.includes('classic')) {
            bgPrintColor = '#fdfbf7'; // Krem
            watermarkStyle = 'color: rgba(60, 60, 60, 0.04);';
            fonts = {
                title: "'Playfair Display', serif",     // Klasike, elegante
                body: "'Crimson Text', serif",          // Shumë e lexueshme, stil libri
                watermark: "'UnifrakturMaguntia', cursive", // Stil gotik/vjetër për watermark
                meta: "'Courier Prime', monospace",
                signature: "'Great Vibes', cursive"
            };
        } else if (themeClass.includes('minimal')) {
            bgPrintColor = '#ffffff'; // E bardhë absolute
            watermarkStyle = 'color: rgba(0,0,0,0.02); letter-spacing: 10px;';
            fonts = {
                title: "'Montserrat', sans-serif",      // Moderne, gjeometrike
                body: "'Lato', sans-serif",             // E pastër
                watermark: "'Oswald', sans-serif",      // E fortë, industriale
                meta: "'Roboto Mono', monospace",
                signature: "'Sacramento', cursive"      // Nënshkrim më i lehtë
            };
        } else if (themeClass.includes('gold')) {
            bgPrintColor = '#ffffff'; 
            watermarkStyle = 'color: rgba(212, 175, 55, 0.08);';
            fonts = {
                title: "'Cinzel', serif",               // Luksoze, romake
                body: "'Cormorant Garamond', serif",    // Shumë elegante dhe e hollë
                watermark: "'Cinzel Decorative', serif", 
                meta: "'Courier Prime', monospace",
                signature: "'Great Vibes', cursive"
            };
        } else if (isDark) {
            bgPrintColor = '#0f172a'; 
            watermarkStyle = 'color: rgba(255,255,255,0.03);';
            fonts = {
                title: "'Orbitron', sans-serif",        // Futuriste / Sci-fi
                body: "'Share Tech Mono', monospace",   // Stil Terminali / Kodi
                watermark: "'Black Ops One', cursive",  // Ushtarake / E rëndë
                meta: "'Fira Code', monospace",
                signature: "'Reenie Beanie', cursive"   // Stil marker-i
            };
        } else if (themeClass.includes('robotics')) {
    bgPrintColor = '#0f172a';
    watermarkStyle = 'color: rgba(34, 211, 238, 0.05); font-family: "Share Tech Mono", monospace;';
    fonts = {
        title: "'Orbitron', sans-serif",
        body: "'Fira Code', monospace",
        watermark: "'Share Tech Mono', monospace",
        meta: "'Fira Code', monospace",
        signature: "'VT323', monospace" // Font i vjetër i ekranit
    };
}
        
        // --- PËRGATITJA E PËRMBAJTJES ---
        const content = type === 'poem' ? item.content : (item.fullText || item.text);
        const title = type === 'poem' ? item.title : (item.text ? "Thënie" : item.title);
        const watermarkText = type === 'poem' ? 'A.SHERIFI' : 'A.SHERIFI';
        const qrUrl = generateQRCode(`https://agimsherifi.com${item.url || ''}`, 100, isDark);
        
        // Ngjyrat
        const accentColor = themeClass.includes('gold') ? '#d4af37' : (isDark ? '#22d3ee' : '#06b6d4');
        const textColor = isDark ? '#e2e8f0' : '#1e293b';
        const secondaryTextColor = isDark ? '#94a3b8' : '#64748b';
        const borderColor = isDark ? '#334155' : '#e2e8f0';

        // --- CSS PËR PRINTIM ---
        const style = document.createElement('style');
        style.innerHTML = `
            @import url('https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Cinzel:wght@400;700;900&family=Cinzel+Decorative:wght@700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Courier+Prime&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Great+Vibes&family=Lato:wght@300;400;700&family=Merriweather:wght@300;400;700&family=Montserrat:wght@300;400;700&family=Orbitron:wght@400;700&family=Oswald:wght@500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Reenie+Beanie&family=Roboto+Mono:wght@300;400&family=Sacramento&family=Share+Tech+Mono&family=UnifrakturMaguntia&display=swap');

            @media print {
                @page { margin: 0; size: auto; }
                html, body {
                    height: 100vh !important;
                    overflow: hidden !important;
                    margin: 0 !important; padding: 0 !important;
                }
                body > *:not(#print-area) { display: none !important; }
                #print-area {
                    display: block !important;
                    position: absolute !important;
                    top: 0 !important; left: 0 !important;
                    width: 100% !important; height: 100% !important;
                    z-index: 99999 !important;
                    margin: 0 !important; padding: 0 !important;
                    -webkit-print-color-adjust: exact !important;
                    print-color-adjust: exact !important;
                    background-color: ${bgPrintColor} !important;
                }
                #print-area * { visibility: visible !important; }
            }
        `;
        document.head.appendChild(style);
        
        printArea.className = themeClass;
        
        // --- HTML I FAQES SË PRINTIMIT ---
        printArea.innerHTML = `
            <div class="print-card" style="
                position: relative;
                height: 100%; 
                padding: 50px; 
                box-sizing: border-box; 
                display: flex; 
                flex-direction: column;
                z-index: 1;
                font-family: ${fonts.body}; /* Fonti bazë */
            ">
                <div class="print-watermark" style="
                    position: absolute;
                    top: 50%; left: 50%;
                    transform: translate(-50%, -50%) rotate(-45deg);
                    font-family: ${fonts.watermark};
                    font-size: 140px;
                    font-weight: 900;
                    white-space: nowrap;
                    pointer-events: none;
                    z-index: 0;
                    user-select: none;
                    ${watermarkStyle}
                ">
                    ${watermarkText}
                </div>
                
                <div class="print-content" style="position: relative; z-index: 10; height: 100%; display: flex; flex-direction: column;">
                    
                    <div style="font-family: ${fonts.title}; font-size: 12px; letter-spacing: 4px; text-transform: uppercase; color: ${secondaryTextColor}; margin-bottom: 30px; text-align: center;">
                        Portofoli i Agim Sherifit
                    </div>
                    
                    <h1 style="font-family: ${fonts.title}; font-size: 42px; font-weight: 700; margin-bottom: 25px; color: ${textColor}; line-height: 1.2; text-align: center;">
                        ${title}
                    </h1>
                    
                    <div style="width: 80px; height: 3px; background-color: ${accentColor}; margin: 0 auto 40px auto; border-radius: 2px;"></div>
                    
                    <div style="flex-grow: 1; display: flex; align-items: center; justify-content: center; margin: 20px 0;">
                        <p style="
                            font-family: ${fonts.body}; 
                            font-size: 22px; 
                            line-height: 1.8; 
                            font-style: ${themeClass.includes('minimal') || isDark ? 'normal' : 'italic'}; 
                            white-space: pre-line; 
                            color: ${textColor}; 
                            text-align: center; 
                            max-width: 90%;
                        ">
                            ${content}
                        </p>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: flex-end; margin-top: auto; padding-top: 40px; border-top: 1px dashed ${borderColor};">
                        
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="background: white; padding: 4px; border-radius: 4px; border: 1px solid ${isDark ? '#334155' : '#e2e8f0'};">
                                <img src="${qrUrl}" alt="QR Code" style="width: 70px; height: 70px; display: block;" />
                            </div>
                            <div style="font-family: ${fonts.meta}; font-size: 10px; color: ${secondaryTextColor}; line-height: 1.4;">
                                Skano për<br/>versionin<br/>online
                            </div>
                        </div>
                        
                        <div style="text-align: right;">
                            <div style="font-family: ${fonts.signature}; font-size: 38px; color: ${accentColor}; transform: rotate(-3deg); margin-bottom: 5px;">
                                Agim Sherifi
                            </div>
                            <div style="font-family: ${fonts.meta}; font-size: 10px; color: ${secondaryTextColor}; text-transform: uppercase; letter-spacing: 1px;">
                                ${new Date().toLocaleDateString('sq-AL', { year: 'numeric', month: 'long', day: 'numeric' })}
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px; text-align: center;">
                         <div style="font-family: ${fonts.meta}; font-size: 9px; color: ${secondaryTextColor}; opacity: 0.7;">
                            https://agimsherifi.com${item.url || ''}
                        </div>
                    </div>
                </div>
            </div>
        `;

        // Print & Cleanup
        window.print();
        onClose();
        setTimeout(() => { 
            printArea.innerHTML = ''; 
            printArea.className = '';
            style.remove();
        }, 1000);
    };

    return (
        <div className="fixed inset-0 z-[250] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-fade-in">
            <div className="bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-lg w-full relative border border-cyan-500/30">
                <button onClick={onClose} className="absolute top-4 right-4 z-50 p-3 bg-black/10 dark:bg-white/10 rounded-full text-slate-500 dark:text-slate-400 hover:text-cyan-500 hover:bg-black/20 transition-all"><Icons.X className="w-6 h-6" /></button>
                <h2 className="text-2xl font-serif font-bold mb-6 text-center dark:text-white">Zgjidh Stilim e Printimit</h2>
                
                <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
    {/* Existing themes */}
    <button onClick={() => printNow('print-theme-classic')} className="p-4 border border-slate-300 rounded hover:border-cyan-500 transition-all bg-[#fdfbf7] text-slate-900 group">
        <span className="font-serif font-bold block mb-2 group-hover:text-cyan-600 transition-colors">Klasike</span>
        <span className="text-xs text-slate-500">Letër e vjetër, font klasik.</span>
    </button>
    
    <button onClick={() => printNow('print-theme-minimal')} className="p-4 border border-slate-300 rounded hover:border-cyan-500 transition-all bg-white text-slate-900 group">
        <span className="font-sans font-bold block mb-2 group-hover:text-cyan-600 transition-colors">Minimale</span>
        <span className="text-xs text-slate-500">E pastër, moderne.</span>
    </button>
    
    <button onClick={() => printNow('print-theme-gold')} className="p-4 border border-yellow-500 rounded hover:shadow-[0_0_15px_rgba(234,179,8,0.3)] transition-all bg-white text-slate-900 group">
        <span className="font-serif font-bold block mb-2 text-yellow-600 group-hover:text-yellow-700 transition-colors">Kornizë Ari</span>
        <span className="text-xs text-slate-500">Luksoze, për momente speciale.</span>
    </button>
    
    <button onClick={() => printNow('print-theme-dark')} className="p-4 border border-slate-700 rounded hover:border-cyan-500 transition-all bg-slate-900 text-white group">
        <span className="font-mono font-bold block mb-2 text-cyan-400 group-hover:text-cyan-300 transition-colors">E Errët (Dark)</span>
        <span className="text-xs text-slate-400">Sfond i zi, stil kodi.</span>
    </button>
    
    <button onClick={() => printNow('print-theme-antique')} className="p-4 border border-[#c9a75d] rounded hover:border-[#d4af37] transition-all bg-[#fdf5e6] text-[#4a4a4a] group">
        <span className="font-serif font-bold block mb-2 text-[#8B4513] group-hover:text-[#A0522D] transition-colors">Antike</span>
        <span className="text-xs text-slate-500">Stil Pergamene.</span>
    </button>
    
    <button onClick={() => printNow('print-theme-robotics')} className="p-4 border border-cyan-500 rounded hover:border-green-500 transition-all bg-slate-900 text-cyan-400 group">
        <span className="font-mono font-bold block mb-2 text-green-400 group-hover:text-green-300 transition-colors">Robotikë</span>
        <span className="text-xs text-slate-400">Vizualizim Kodi.</span>
    </button>
    
    {/* ✨ NEW THEMES */}
    <button onClick={() => printNow('print-theme-romantic')} className="p-4 border border-pink-300 rounded hover:border-pink-500 transition-all bg-pink-50 text-slate-900 group">
        <span className="font-serif font-bold block mb-2 text-pink-600 group-hover:text-pink-700 transition-colors">Romantike</span>
        <span className="text-xs text-slate-500">Për poezi dashurie.</span>
    </button>
    
    <button onClick={() => printNow('print-theme-nature')} className="p-4 border border-green-300 rounded hover:border-green-500 transition-all bg-green-50 text-slate-900 group">
        <span className="font-serif font-bold block mb-2 text-green-700 group-hover:text-green-800 transition-colors">Natyrë</span>
        <span className="text-xs text-slate-500">Për peizazhe.</span>
    </button>
    
    <button onClick={() => printNow('print-theme-neon')} className="p-4 border border-purple-500 rounded hover:shadow-[0_0_15px_rgba(168,85,247,0.5)] transition-all bg-black text-white group">
        <span className="font-mono font-bold block mb-2 text-purple-400 group-hover:text-purple-300 transition-colors">Neon</span>
        <span className="text-xs text-slate-400">Cyberpunk style.</span>
    </button>
</div>
            </div>
        </div>
    );
};

        const PortfolioAnalytics = ({ darkMode }) => {
    const [currentStats, setCurrentStats] = useState({
        visits: 1530,
        views: 487,
        clicks: 320,
        minutes: 0,
        seconds: 0
    });

    const finalStats = {
        visits: 3248,
        views: 1475,
        clicks: 1113,
        minutes: 94,
        seconds: 32
    };

    useEffect(() => {
        const duration = 10000000; // 10 sekonda për të gjithë animacionin
        const interval = 50; // Update çdo 50ms
        const steps = duration / interval;
        
        let currentStep = 0;
        
        const animationInterval = setInterval(() => {
            currentStep++;
            const progress = Math.min(currentStep / steps, 1);
            
            // Funksion për easing (për efekt më të butë)
            const easeOutQuad = (t) => t * (2 - t);
            const easedProgress = easeOutQuad(progress);
            
            setCurrentStats({
    visits: Math.floor(2530 + (finalStats.visits - 2530) * easedProgress),
    views: Math.floor(987 + (finalStats.views - 987) * easedProgress),
    clicks: Math.floor(520 + (finalStats.clicks - 520) * easedProgress),
    minutes: Math.floor((finalStats.minutes * 60 + finalStats.seconds) * easedProgress * 2 / 60),
    seconds: Math.floor((finalStats.minutes * 60 + finalStats.seconds) * easedProgress * 2 % 60)
});
            
            if (currentStep >= steps) {
                clearInterval(animationInterval);
                
                // Për të mbajtur numrat "të gjallë" pas animacionit
                setTimeout(() => {
                    setCurrentStats(prev => ({
                        ...prev,
                        visits: prev.visits + Math.floor(Math.random() * 3) - 1,
                        views: prev.views + Math.floor(Math.random() * 2),
                        clicks: prev.clicks + Math.floor(Math.random() * 2)
                    }));
                }, 3000);
            }
        }, interval);
        
        return () => clearInterval(animationInterval);
    }, []);

    const stats = [
        { 
            label: "Vizita Mujore", 
            value: currentStats.visits.toLocaleString(), 
            icon: Icons.Globe, 
            color: "text-blue-400" 
        },
        { 
            label: "Shikime në Poezi", 
            value: currentStats.views.toLocaleString(), 
            icon: Icons.Eye, 
            color: "text-cyan-400" 
        },
        { 
            label: "Klikime në Thënie", 
            value: currentStats.clicks.toLocaleString(), 
            icon: Icons.Activity, 
            color: "text-purple-400" 
        },
        { 
            label: "Koha Mesatare", 
            value: `${currentStats.minutes}m ${currentStats.seconds.toString().padStart(2, '0')}s`, 
            icon: Icons.Music, 
            color: "text-green-400" 
        }
    ];

    return (
        <div className={`mt-12 p-6 rounded-2xl border ${darkMode ? 'bg-slate-900/50 border-cyan-900/50' : 'bg-white border-slate-200'} backdrop-blur-md relative overflow-hidden group`}>
            <div className="absolute top-0 right-0 p-2 bg-cyan-500/10 rounded-bl-xl text-cyan-500 text-[10px] font-mono tracking-widest animate-pulse">
                STATISTIKA LIVE
            </div>
            
            <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
                {stats.map((stat, i) => (
                    <div key={i} className="flex flex-col items-center justify-center p-4 rounded-xl hover:bg-white/5 transition-colors">
                        <stat.icon className={`w-6 h-6 mb-2 ${stat.color} opacity-80 animate-pulse`} />
                        <div className={`text-2xl font-bold font-mono ${darkMode ? 'text-white' : 'text-slate-900'} transition-all duration-300`}>
                            {stat.value}
                        </div>
                        <div className={`text-xs uppercase tracking-wider ${darkMode ? 'text-slate-500' : 'text-slate-400'}`}>
                            {stat.label}
                        </div>
                    </div>
                ))}
            </div>
            
            <div className="mt-4 h-1 w-full bg-slate-800 rounded-full overflow-hidden">
                <div className="h-full bg-gradient-to-r from-blue-500 via-cyan-500 to-purple-500 animate-[scroll_5s_linear_infinite]" style={{width: '50%'}}></div>
            </div>
            
            {/* Rresht për efekt vizual të animacionit */}
            <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-cyan-500/30 to-transparent animate-pulse"></div>
        </div>
    );
};

const PageTransition = ({ children, uniqueKey }) => {
    const [render, setRender] = useState(uniqueKey);
    const [animationKey, setAnimationKey] = useState(0);

    useEffect(() => {
        setRender(uniqueKey);
        setAnimationKey(prev => prev + 1);
    }, [uniqueKey]);

    return (
        <div key={animationKey} className="page-transition w-full">
            {children}
        </div>
    );
};

        // --- COMPONENTS ---
        const ScrollProgress = ({ darkMode }) => {
            const [width, setWidth] = useState(0);
            useEffect(() => {
                const onScroll = () => {
                    const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                    const scrolled = (winScroll / height) * 100;
                    setWidth(scrolled);
                };
                window.addEventListener('scroll', onScroll);
                return () => window.removeEventListener('scroll', onScroll);
            }, []);
            return <div className="fixed top-0 left-0 h-1 bg-cyan-500 z-[100]" style={{ width: `${width}%` }}></div>;
        };

        const ParallaxBackground = ({ darkMode }) => {
            const [offset, setOffset] = useState(0);
            useEffect(() => {
                const handleScroll = () => setOffset(window.pageYOffset);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            return (
                <div className="fixed inset-0 pointer-events-none z-0 overflow-hidden">
                    <div className={`absolute inset-0 transition-colors duration-1000 ${darkMode ? 'bg-slate-950' : 'bg-slate-50'}`}></div>
                    <div className="absolute inset-0 opacity-30" style={{ transform: `translateY(${offset * 0.1}px)`, backgroundImage: 'radial-gradient(1px 1px at 20px 30px, #06b6d4, rgba(0,0,0,0)), radial-gradient(1px 1px at 40px 70px, #fff, rgba(0,0,0,0))', backgroundSize: '100px 100px' }}></div>
                    <div className={`absolute top-0 left-0 w-[500px] h-[500px] rounded-full filter blur-[100px] opacity-20 animate-blob ${darkMode ? 'bg-cyan-900' : 'bg-cyan-200'}`} style={{ transform: `translateY(${offset * 0.2}px)` }}></div>
                    <div className={`absolute bottom-0 right-0 w-[600px] h-[600px] rounded-full filter blur-[100px] opacity-20 animate-blob animation-delay-2000 ${darkMode ? 'bg-blue-900' : 'bg-blue-200'}`} style={{ transform: `translateY(${offset * 0.15}px)` }}></div>
                </div>
            );
        };

        const ConstellationBackground = ({ darkMode }) => {
            const canvasRef = useRef(null);
            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                let width = canvas.width = window.innerWidth;
                let height = canvas.height = window.innerHeight;
                let particles = [];
                const mouse = { x: null, y: null };

                const createParticles = () => {
                    particles = [];
                    const count = Math.floor(width * height / 15000);
                    for (let i = 0; i < count; i++) {
                        particles.push({
                            x: Math.random() * width,
                            y: Math.random() * height,
                            vx: (Math.random() - 0.5) * 0.5,
                            vy: (Math.random() - 0.5) * 0.5,
                            size: Math.random() * 2
                        });
                    }
                };
                createParticles();

                const animate = () => {
                    ctx.clearRect(0, 0, width, height);
                    particles.forEach((p, i) => {
                        p.x += p.vx;
                        p.y += p.vy;
                        if (p.x < 0 || p.x > width) p.vx *= -1;
                        if (p.y < 0 || p.y > height) p.vy *= -1;

                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                        ctx.fillStyle = darkMode ? 'rgba(255,255,255,0.5)' : 'rgba(0,0,0,0.5)';
                        ctx.fill();

                        if (mouse.x) {
                            const dx = mouse.x - p.x;
                            const dy = mouse.y - p.y;
                            const dist = Math.sqrt(dx * dx + dy * dy);
                            if (dist < 150) {
                                ctx.beginPath();
                                ctx.moveTo(p.x, p.y);
                                ctx.lineTo(mouse.x, mouse.y);
                                ctx.strokeStyle = darkMode ? `rgba(6, 182, 212, ${1 - dist / 150})` : `rgba(6, 182, 212, ${1 - dist / 150})`;
                                ctx.lineWidth = 0.5;
                                ctx.stroke();
                            }
                        }
                    });
                    requestAnimationFrame(animate);
                };

                animate();

                const handleResize = () => {
                    width = canvas.width = window.innerWidth;
                    height = canvas.height = window.innerHeight;
                    createParticles();
                };

                const handleMouseMove = (e) => {
                    mouse.x = e.clientX;
                    mouse.y = e.clientY;
                };

                window.addEventListener('resize', handleResize);
                window.addEventListener('mousemove', handleMouseMove);

                return () => {
                    window.removeEventListener('resize', handleResize);
                    window.removeEventListener('mousemove', handleMouseMove);
                };
            }, [darkMode]);

            return (
                <div className="fixed inset-0 pointer-events-none z-0 overflow-hidden">
                    <canvas ref={canvasRef} className="absolute inset-0 z-0 opacity-60"></canvas>
                </div>
            );
        };

        const AnimatedCounter = ({ end, label, IconCmp, darkMode }) => {
            const [count, setCount] = useState(0);
            const ref = useRef(null);

            useEffect(() => {
                const observer = new IntersectionObserver((entries) => {
                    if (entries[0].isIntersecting) {
                        let start = 0;
                        const duration = 2000;
                        const increment = end / (duration / 16);

                        const timer = setInterval(() => {
                            start += increment;
                            if (start >= end) {
                                setCount(end);
                                clearInterval(timer);
                            } else {
                                setCount(Math.floor(start));
                            }
                        }, 16);
                        observer.disconnect();
                    }
                });
                if (ref.current) observer.observe(ref.current);
                return () => observer.disconnect();
            }, [end]);
            return (
                <div ref={ref} className={`glass-panel p-6 rounded-xl text-center flex flex-col items-center transform hover:scale-105 transition-transform ${darkMode ? 'bg-slate-900/50' : 'bg-white border-slate-200'}`}>
                    <div className="mb-2 text-cyan-500"><IconCmp className="w-8 h-8" /></div>
                    <div className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-slate-900'}`}>{count}+</div>
                    <div className={`text-xs uppercase tracking-widest opacity-70 ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>{label}</div>
                </div>
            );
        };

        // --- Floating Action Menu ---
        const FloatingActionMenu = ({ darkMode }) => {
            const { isPlaying, togglePlay } = useSimpleAudio();
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [showNotification, setShowNotification] = useState(null);
            
            const actions = [
                {
                    icon: isPlaying ? Icons.SoundOff : Icons.SoundOn,
                    label: isPlaying ? "Ndalo Muzikën" : "Luaj Muzikë",
                    action: togglePlay,
                    color: "text-cyan-500"
                },
                /* {
     icon: Icons.Bookmark,
     label: "Shiko Bookmarks",
     action: () => {
         window.location.hash = '#bookmarks';
         setShowNotification("U drejtua tek Bookmarks");
     },
     color: "text-yellow-500"
 },
 {
     icon: Icons.Printer,
     label: "Printo Faqen",
     action: () => {
         window.print();
         setShowNotification("Gati për printim");
     },
     color: "text-blue-500"
 }, */
                {
                    icon: Icons.Share,
                    label: "Shpërndaj Faqen",
                    action: () => {
                        if (navigator.share) {
                            navigator.share({
                                title: 'Agim Sherifi - Portofol',
                                text: 'Shiko portofolin kinematik të Agim Sherifit',
                                url: window.location.href
                            });
                        } else {
                            navigator.clipboard.writeText(window.location.href);
                            setShowNotification("Linku u kopjua!");
                        }
                    },
                    color: "text-green-500"
                }
            ];
            
            useEffect(() => {
                if (showNotification) {
                    const timer = setTimeout(() => setShowNotification(null), 2000);
                    return () => clearTimeout(timer);
                }
            }, [showNotification]);
            
            return (
                <>
                    {/* Notification */}
                    {showNotification && (
                        <div className={`fixed bottom-24 right-6 z-60 px-4 py-2 rounded-full shadow-lg animate-fade-in ${darkMode ? 'bg-slate-800 text-cyan-400 border border-cyan-900' : 'bg-white text-cyan-600 border border-cyan-200'}`}>
                            <span className="text-sm font-bold">{showNotification}</span>
                        </div>
                    )}
                    
                    {/* Floating Menu */}
<div className={`fixed bottom-6 left-6 z-50 flex flex-col items-start gap-3 transition-all duration-500 ease-out group hover:gap-4 hover:pl-3 hover:pr-4 hover:py-3 hover:rounded-xl hover:bg-gradient-to-r hover:from-cyan-500/10 hover:via-cyan-500/5 hover:to-transparent hover:shadow-[0_0_40px_rgba(34,211,238,0.3)] hover:ring-1 hover:ring-cyan-300/20 ${isMenuOpen ? 'gap-4' : ''}`}>
    
    {/* Action Buttons */}
    {isMenuOpen && (
        <div className="flex flex-col gap-2 animate-fade-in">
            {actions.map((action, index) => (
                <button
                    key={index}
                    onClick={action.action}
                    className={`p-3 rounded-full shadow-lg flex items-center gap-3 transition-all transform hover:scale-105 ${darkMode ? 'bg-slate-800 hover:bg-slate-700' : 'bg-white hover:bg-slate-100'} ${action.color}`}
                    title={action.label}
                >
                    <action.icon className="w-5 h-5" />
                    <span className="text-xs font-bold whitespace-nowrap">{action.label}</span>
                </button>
                                ))}
                            </div>
                        )}
                        
                        {/* Main Toggle Button */}
                        <button
                            onClick={() => setIsMenuOpen(!isMenuOpen)}
                            className={`p-4 rounded-full shadow-2xl transition-all duration-300 ${isMenuOpen ? 'rotate-45 bg-cyan-600' : (darkMode ? 'bg-slate-800' : 'bg-white')} ${darkMode ? 'text-white' : 'text-slate-900'}`}
                            aria-label={isMenuOpen ? "Mbyll menunë" : "Hap menunë"}
                        >
                            <div className="flex items-center gap-2">
                                {isMenuOpen ? (
                                    <Icons.X className="w-6 h-6" />
                                ) : (
                                    <>
                                        <span className="font-cinematic tracking-widest text-sm">MENU</span>
                                        {isPlaying && (
                                            <div className="flex gap-1 items-center">
                                                <div className="audio-wave-bar w-1 h-2 bg-cyan-500" style={{animationDelay: '0s'}}></div>
                                                <div className="audio-wave-bar w-1 h-3 bg-cyan-500" style={{animationDelay: '0.1s'}}></div>
                                                <div className="audio-wave-bar w-1 h-4 bg-cyan-500" style={{animationDelay: '0.2s'}}></div>
                                            </div>
                                        )}
                                    </>
                                )}
                            </div>
                        </button>
                    </div>
                </>
            );
        };

        const TiltCard = ({ children, className, onClick }) => {
            const cardRef = useRef(null);
            const [rotate, setRotate] = useState({ x: 0, y: 0 });
            const [glow, setGlow] = useState({ x: 50, y: 50, opacity: 0 });

            const handleMouseMove = (e) => {
                if (!cardRef.current) return;
                const rect = cardRef.current.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                const centerX = rect.width / 2;
                const centerY = rect.height / 2;

                const rotateX = ((y - centerY) / centerY) * -5;
                const rotateY = ((x - centerX) / centerX) * 5;

                setRotate({ x: rotateX, y: rotateY });
                setGlow({ x: (x / rect.width) * 100, y: (y / rect.height) * 100, opacity: 1 });
            };

            const handleMouseLeave = () => {
                setRotate({ x: 0, y: 0 });
                setGlow({ ...glow, opacity: 0 });
            };

            return (
                <div
                    className={`tilt-card relative h-full ${className}`}
                    ref={cardRef}
                    onMouseMove={handleMouseMove}
                    onMouseLeave={handleMouseLeave}
                    onClick={onClick}
                    style={{ transform: `perspective(1000px) rotateX(${rotate.x}deg) rotateY(${rotate.y}deg)` }}
                >
                    <div className="tilt-content h-full">
                        {children}
                    </div>
                    <div
                        className="absolute inset-0 pointer-events-none transition-opacity duration-500 z-40 rounded-2xl mix-blend-overlay"
                        style={{
                            background: `radial-gradient(circle at ${glow.x}% ${glow.y}%, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 80%)`,
                            opacity: glow.opacity
                        }}
                    ></div>
                </div>
            );
        };

        const StarDisplay = ({ rating }) => {
            return (
                <div className="flex items-center gap-1 mt-1">
                     <div className="flex items-center">
                        {[0, 1, 2, 3, 4].map((index) => {
                            let fill = Math.max(0, Math.min(100, (rating - index) * 100));
                            return (
                                <div key={index} className="relative w-4 h-4 mr-0.5">
                                    <Icons.Star className="w-full h-full text-gray-300 dark:text-gray-700 absolute top-0 left-0" />
                                    <div className="overflow-hidden absolute top-0 left-0 h-full" style={{ width: `${fill}%` }}>
                                         <Icons.Star className="w-4 h-4 text-yellow-400 fill-yellow-400" />
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                    <span className="text-xs font-mono font-bold opacity-60 ml-1">({rating})</span>
                </div>
            );
        };

        const PoemRating = ({ poemId, darkMode }) => {
            const [userRating, setUserRating] = useState(0);
            const [hoverRating, setHoverRating] = useState(0);
            const [hasRated, setHasRated] = useState(false);

            useEffect(() => {
                const stored = localStorage.getItem(`poem_rating_${poemId}`);
                if (stored) {
                    setUserRating(parseInt(stored));
                    setHasRated(true);
                }
            }, [poemId]);

            const handleRate = (value) => {
                if (hasRated) return;
                setUserRating(value);
                setHasRated(true);
                localStorage.setItem(`poem_rating_${poemId}`, value);
            };

            return (
                <div className="mt-8 pt-6 border-t border-dashed border-gray-500/30 text-center animate-fade-in">
                    <p className={`mb-3 font-serif italic text-sm ${darkMode ? 'text-slate-400' : 'text-slate-500'}`}>
                        {hasRated ? "Ju e keni vlerësuar këtë poezi:" : "Vlerëso këtë poezi:"}
                    </p>
                    <div className="flex justify-center gap-2 mb-2">
                        {[1, 2, 3, 4, 5].map((star) => (
                            <button
                                key={star}
                                className={`transition-all duration-300 transform ${hasRated ? 'cursor-default' : 'cursor-pointer hover:scale-125'}`}
                                onClick={() => handleRate(star)}
                                onMouseEnter={() => !hasRated && setHoverRating(star)}
                                onMouseLeave={() => !hasRated && setHoverRating(0)}
                            >
                                <Icons.Star
                                    className={`w-8 h-8 ${star <= (hoverRating || userRating)
                                            ? "text-yellow-400 fill-yellow-400 drop-shadow-[0_0_8px_rgba(250,204,21,0.5)]"
                                            : (darkMode ? "text-slate-700" : "text-slate-300")}`}
                                />
                            </button>
                        ))}
                    </div>
                    {hasRated && (
                        <p className="text-cyan-500 text-xs font-bold tracking-widest animate-pulse">
                            FALEMINDERIT PËR VLERËSIMIN!
                        </p>
                    )}
                </div>
            );
        };

        const RequestModal = ({ isOpen, onClose, darkMode, t }) => {
            if (!isOpen) return null;
            const [sent, setSent] = useState(false);

            const handleSubmit = (e) => {
                e.preventDefault();
                setSent(true);
                setTimeout(() => { setSent(false); onClose(); }, 2000);
            };

            return (
                <div className="fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-fade-in">
                    <div className={`w-full max-w-lg rounded-2xl p-8 relative ${darkMode ? 'bg-slate-900 border border-cyan-900' : 'bg-white shadow-xl'}`}>
                        <button onClick={onClose} className="absolute top-4 right-4 z-50 p-3 bg-black/10 dark:bg-white/10 rounded-full text-slate-500 dark:text-slate-400 hover:text-cyan-500 hover:bg-black/20 transition-all"><Icons.X className="w-6 h-6" /></button>

                        {!sent ? (
                            <>
                                <h2 className="text-2xl font-serif text-cyan-600 mb-2 flex items-center gap-3"><Icons.Pen className="w-6 h-6" /> {t.request.title}</h2>
                                <p className="text-slate-500 mb-6 text-sm">{t.request.desc}</p>
                                <form onSubmit={handleSubmit} className="space-y-4">
                                    <input required className="w-full bg-slate-100 border border-slate-300 dark:bg-slate-800 dark:border-slate-700 p-3 rounded dark:text-white" placeholder="Emri juaj" />
                                    <input required type="email" className="w-full bg-slate-100 border border-slate-300 dark:bg-slate-800 dark:border-slate-700 p-3 rounded dark:text-white" placeholder="Email" />
                                    <select className="w-full bg-slate-100 border border-slate-300 dark:bg-slate-800 dark:border-slate-700 p-3 rounded dark:text-white text-slate-500">
                                        <option>{t.request.type}</option>
                                        <option>Poezi</option>
                                        <option>Tekst Kënge</option>
                                        <option>Dedikim</option>
                                    </select>
                                    <textarea className="w-full h-32 bg-slate-100 border border-slate-300 dark:bg-slate-800 dark:border-slate-700 p-3 rounded dark:text-white" placeholder={t.request.idea}></textarea>
                                    <button className="w-full py-3 bg-cyan-600 text-white font-bold rounded hover:bg-cyan-500">{t.request.submit}</button>
                                </form>
                            </>
                        ) : (
                            <div className="text-center py-10">
                                <div className="text-green-500 flex justify-center mb-4"><Icons.CheckCircle className="w-16 h-16" /></div>
                                <h3 className="text-xl font-bold dark:text-white">Kërkesa u dërgua!</h3>
                            </div>
                        )}
                    </div>
                </div>
            )
        };

        const PoemInspirationModal = ({ poem, isOpen, onClose, darkMode }) => {
            if (!isOpen || !poem) return null;
            
            useEffect(() => {
                if (isOpen) {
                    window.scrollTo({ top: 0, behavior: 'auto' });
                }
            }, [isOpen]);

            return (
                <div className="fixed inset-0 z-[400] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-fade-in overflow-y-auto">
                    <div className={`relative w-full max-w-md rounded-2xl p-8 transform -translate-y-[10cm] ${darkMode ? 'bg-slate-900 border border-cyan-500/30' : 'bg-white shadow-2xl'}`}>
                        <button onClick={onClose} className="absolute top-4 right-4 z-50 p-3 bg-black/10 dark:bg-white/10 rounded-full text-slate-500 dark:text-slate-400 hover:text-cyan-500 hover:bg-black/20 transition-all">
                            <Icons.X className="w-6 h-6" />
                        </button>
                        
                        <div className="text-center mb-6">
                            <div className="inline-block p-3 rounded-full bg-cyan-500/10 mb-4">
                                <Icons.Bulb className="w-8 h-8 text-yellow-500" />
                            </div>
                            <h3 className={`text-2xl font-serif font-bold mb-2 ${darkMode ? 'text-white' : 'text-slate-900'}`}>
                                Ars Poetica
                            </h3>
                            <p className={`text-sm uppercase tracking-widest ${darkMode ? 'text-cyan-400' : 'text-cyan-600'}`}>
                                Sekreti pas vargut
                            </p>
                        </div>
                        
                        <div className="mb-6">
                            <h4 className={`font-serif text-lg mb-2 ${darkMode ? 'text-slate-300' : 'text-slate-700'}`}>
                                "{poem.title}"
                            </h4>
                            <div className={`p-4 rounded-lg italic leading-relaxed border-l-4 ${darkMode ? 'bg-slate-800/50 text-slate-300 border-cyan-500/50' : 'bg-cyan-50 text-slate-600 border-cyan-300'}`}>
                                {poem.inspiration}
                            </div>
                        </div>
                        
                        <div className="flex items-center justify-between text-sm text-slate-500">
                            <div className="flex items-center gap-2">
                                <Icons.Clock className="w-4 h-4" />
                                <span>Fragment i procesit krijues</span>
                            </div>
                            <button onClick={onClose} className="px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded transition-colors">
                                Kuptova
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const PoemDayModal = ({ onClose, darkMode, t, dailyPoem }) => {
            return (
                <div className="fixed inset-0 z-[160] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in">
                    <div className={`w-full max-w-md rounded-2xl p-8 relative text-center ${darkMode ? 'bg-slate-900 border border-cyan-500/50' : 'bg-white shadow-2xl'}`}>
                        <button onClick={onClose} className="absolute top-2 right-2 z-50 p-3 bg-black/10 dark:bg-white/10 rounded-full text-slate-500 dark:text-slate-400 hover:text-cyan-500 hover:bg-black/20 transition-all"><Icons.X className="w-5 h-5" /></button>
                        <div className="text-cyan-500 mb-2 font-cinematic tracking-widest text-xs uppercase">{t.poemDay.title}</div>
                        <h2 className={`text-3xl font-serif font-bold mb-4 ${darkMode ? 'text-white' : 'text-slate-900'}`}>{dailyPoem.title || "Updating!"}</h2>
                        <div className="h-px w-20 bg-cyan-500 mx-auto mb-6"></div>
                        <p className={`text-lg italic font-serif leading-relaxed mb-8 ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>Për shkak te ngarkesës se madhe, thëniet, poezitë dhe galeria do përditësohet çdo dit me materiale të reja!</p>
                        <button onClick={onClose} className="px-6 py-2 border border-cyan-500 text-cyan-500 rounded-full hover:bg-cyan-500 hover:text-white transition-colors text-sm">Mbyll</button>
                    </div>
                </div>
            )
        }

        const TrainingModal = ({ isOpen, onClose, darkMode }) => {
            const [registrationStep, setRegistrationStep] = useState('select');
            const [selectedCourse, setSelectedCourse] = useState(null);
            if (!isOpen) return null;
            const handleRegisterClick = (course) => {
                setSelectedCourse(course);
                setRegistrationStep('form');
            };
            const handleSubmit = (e) => {
                e.preventDefault();
                setTimeout(() => setRegistrationStep('success'), 1000);
            };
            return (
                <div className="fixed inset-0 z-[140] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-fade-in">
                    <div className={`w-full max-w-3xl rounded-2xl p-8 relative ${darkMode ? 'bg-slate-900 border border-cyan-900' : 'bg-white'}`}>
                        <button onClick={() => { onClose(); setRegistrationStep('select'); }} className="absolute top-4 right-4 z-50 p-3 bg-black/10 dark:bg-white/10 rounded-full text-slate-500 dark:text-slate-400 hover:text-cyan-500 hover:bg-black/20 transition-all"><Icons.X className="w-6 h-6" /></button>
                        <h2 className="text-3xl font-serif text-cyan-500 mb-6 flex items-center gap-3">
                            <Icons.Cpu className="w-8 h-8" /> Trajnime Robotike
                        </h2>
                        {registrationStep === 'select' && (
                            <div className="grid md:grid-cols-2 gap-6">
                                <div className="p-6 border border-cyan-500/30 rounded-xl bg-cyan-500/5">
                                    <h3 className={`text-xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-slate-900'}`}>Kids (7-12 vjeç)</h3>
                                    <p className="text-slate-400 mb-4">Bazat e programimit dhe ndërtimit me LEGO Education.</p>
                                    <button onClick={() => handleRegisterClick('Kids')} className="w-full py-2 bg-cyan-600 hover:bg-cyan-500 transition-colors rounded text-white font-bold text-sm">Regjistrohu</button>
                                </div>
                                <div className="p-6 border border-cyan-500/30 rounded-xl bg-cyan-500/5">
                                    <h3 className={`text-xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-slate-900'}`}>Junior (13-18 vjeç)</h3>
                                    <p className="text-slate-400 mb-4">Programim i avancuar me Arduino dhe Python.</p>
                                    <button onClick={() => handleRegisterClick('Junior')} className="w-full py-2 bg-cyan-600 hover:bg-cyan-500 transition-colors rounded text-white font-bold text-sm">Regjistrohu</button>
                                </div>
                            </div>
                        )}
                        {registrationStep === 'form' && (
                            <form onSubmit={handleSubmit} className="space-y-4">
                                <h3 className={`text-xl mb-2 ${darkMode ? 'text-white' : 'text-slate-900'}`}>Regjistrim për: <span className="text-cyan-400">{selectedCourse}</span></h3>
                                <input required type="text" placeholder="Emri i prindit" className={`w-full p-3 rounded border ${darkMode ? 'bg-slate-800 border-slate-700 text-white' : 'bg-slate-100 border-slate-300'}`} />
                                <input required type="email" placeholder="Email" className={`w-full p-3 rounded border ${darkMode ? 'bg-slate-800 border-slate-700 text-white' : 'bg-slate-100 border-slate-300'}`} />
                                <button type="submit" className="w-full py-3 bg-cyan-600 hover:bg-cyan-500 rounded text-white font-bold mt-4">Dërgo</button>
                            </form>
                        )}
                        {registrationStep === 'success' && (
                            <div className="text-center py-10">
                                <div className="flex justify-center mb-4 text-green-500"><Icons.CheckCircle className="w-16 h-16" /></div>
                                <h3 className={`text-2xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-slate-900'}`}>Regjistrimi u dërgua!</h3>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const SuggestionModal = ({ isOpen, onClose, darkMode }) => {
            const [submitted, setSubmitted] = useState(false);
            if (!isOpen) return null;
            const handleSubmit = () => { setSubmitted(true); setTimeout(() => { setSubmitted(false); onClose(); }, 3000); };
            return (
                <div className="fixed inset-0 z-[140] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-fade-in">
                    <div className={`w-full max-w-lg rounded-2xl p-8 relative ${darkMode ? 'bg-slate-900 border border-cyan-900' : 'bg-white'}`}>
                        <button onClick={onClose} className="absolute top-4 right-4 z-50 p-3 bg-black/10 dark:bg-white/10 rounded-full text-slate-500 dark:text-slate-400 hover:text-cyan-500 hover:bg-black/20 transition-all"><Icons.X className="w-6 h-6" /></button>
                        {!submitted ? (
                            <>
                                <h2 className={`text-2xl font-serif mb-4 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-slate-900'}`}><Icons.Bulb className="w-6 h-6 text-yellow-400" /> Sugjerime & Ide</h2>
                                <textarea className={`w-full h-32 border rounded p-4 mb-4 ${darkMode ? 'bg-slate-800 border-slate-700 text-white' : 'bg-slate-100 border-slate-300'}`} placeholder="Shkruani idenë tuaj këtu..."></textarea>
                                <button onClick={handleSubmit} className="w-full py-3 bg-cyan-600 text-white font-bold rounded hover:bg-cyan-500 transition-colors">Dërgo</button>
                            </>
                        ) : (
                            <div className="text-center py-8">
                                <div className="text-cyan-500 flex justify-center mb-4"><Icons.CheckCircle className="w-12 h-12" /></div>
                                <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-slate-900'}`}>Faleminderit!</h3>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const PoemFilmModal = ({ poem, isOpen, onClose, darkMode, onPrintRequest, bookmarks }) => {
    if (!isOpen || !poem) return null;
    
    // --- LOGJIKA E SHTETIT (E pandryshuar) ---
    const [text, setText] = useState('');
    const [showSignature, setShowSignature] = useState(false);
    const [soundEnabled, setSoundEnabled] = useState(false);
    const audioCtxRef = useRef(null);
    const isOpenRef = useRef(isOpen);

    useEffect(() => {
        isOpenRef.current = isOpen;
        if (isOpen && poem.seoTitle) {
            document.title = poem.seoTitle + " | Agim Sherifi";
            const metaDesc = document.querySelector('meta[name="description"]');
            if (metaDesc && poem.seoDescription) {
                metaDesc.setAttribute('content', poem.seoDescription);
            }
        }
    }, [isOpen, poem]);

    // Logjika e zërit (Click Sound)
    const playClick = () => {
        if (!soundEnabled || !isOpenRef.current) return;
        if (!audioCtxRef.current) {
            audioCtxRef.current = new (window.AudioContext || window.webkitAudioContext)();
        }
        const ctx = audioCtxRef.current;
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        const bufferSize = ctx.sampleRate * 0.05;
        const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
        const data = buffer.getChannelData(0);
        for (let i = 0; i < bufferSize; i++) {
            data[i] = Math.random() * 2 - 1;
        }
        const noise = ctx.createBufferSource();
        noise.buffer = buffer;
        osc.frequency.setValueAtTime(800, ctx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(100, ctx.currentTime + 0.05);
        gain.gain.setValueAtTime(0.5, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.05);
        osc.connect(gain);
        noise.connect(gain);
        gain.connect(ctx.destination);
        osc.start();
        noise.start();
        osc.stop(ctx.currentTime + 0.05);
        noise.stop(ctx.currentTime + 0.05);
    };

    // Efekti i shkrimit (Typing Effect)
    useEffect(() => {
        if (isOpen) {
            let i = 0;
            setText('');
            setShowSignature(false);
            const content = poem.content || "";
            let timeoutId;

            const typeChar = () => {
                if (!isOpenRef.current) return;
                if (i < content.length) {
                    setText(content.slice(0, i + 1));
                    playClick();
                    i++;
                    let delay = 25 + Math.random() * 40;
                    const char = content[i - 1];
                    if (char === '\n') delay += 300;
                    else if (['.', ',', '!', '?'].includes(char)) delay += 150;
                    else if (char === ' ') delay += 30;
                    timeoutId = setTimeout(typeChar, delay);
                } else {
                    setTimeout(() => setShowSignature(true), 600);
                }
            };
            timeoutId = setTimeout(typeChar, 800);
            return () => clearTimeout(timeoutId);
        }
    }, [isOpen, poem, soundEnabled]);

    const handleBookmark = () => {
        if (bookmarks.isBookmarked(poem.id, 'poem')) {
            const bookmarkId = bookmarks.getBookmarkId(poem.id, 'poem');
            if (bookmarkId) bookmarks.removeBookmark(bookmarkId);
        } else {
            bookmarks.addBookmark(poem, 'poem');
        }
    };

    return (
        <div className="fixed inset-0 z-[200] flex items-center justify-center bg-black/95 backdrop-blur-xl animate-fade-in p-4">
            <div 
                className={`relative w-full max-w-3xl min-h-[70vh] max-h-[90vh] flex flex-col overflow-y-auto p-8 md:p-12 shadow-2xl rounded-sm transition-all duration-1000 animate-scale-in ${darkMode ? 'bg-[#1a1a1a] text-slate-200' : 'bg-[#fdfbf7] text-slate-800'}`}
                style={{ 
                    boxShadow: darkMode ? '0 0 50px rgba(6,182,212,0.1)' : '0 0 50px rgba(0,0,0,0.1)', 
                    fontFamily: "'Cinzel', serif" 
                }}
            >
                {/* --- HEADER: Controls (Top Left/Right) --- */}
                <div className="absolute top-4 left-4 flex gap-2 z-50">
                    <button onClick={() => setSoundEnabled(!soundEnabled)} className="p-3 hover:bg-black/10 rounded-full transition-colors text-cyan-600 bg-black/5 dark:bg-white/5">
                        {soundEnabled ? <Icons.SoundOn className="w-5 h-5" /> : <Icons.SoundOff className="w-5 h-5" />}
                    </button>
                </div>
                <button onClick={onClose} className="absolute top-4 right-4 z-50 p-3 bg-black/10 dark:bg-white/10 rounded-full text-slate-500 dark:text-slate-400 hover:text-cyan-500 hover:bg-black/20 transition-all">
                    <Icons.X className="w-5 h-5" />
                </button>

                {/* --- CONTENT WRAPPER --- */}
                <div className="flex flex-col flex-grow">
                    
                    {/* 1. Title & Info (Top Center) */}
                    <div className="text-center mb-10 mt-9 opacity-0 animate-fade-in" style={{ animationDelay: '0.5s', animationFillMode: 'forwards' }}>
                        <h2 className="text-3xl md:text-5xl font-bold mb-3 tracking-wide">{poem.title}</h2>
                        <div className="text-xs uppercase tracking-[0.2em] opacity-60 mb-3">{poem.date}</div>
                        <div className="flex justify-center opacity-70 scale-90">
                            <StarDisplay rating={poem.rating} />
                        </div>
                    </div>

                    {/* 2. Poem Text (Middle Center) */}
                    <div className="flex-grow flex items-center justify-center mb-12">
                        <div className="text-lg md:text-xl leading-loose whitespace-pre-line font-serif opacity-90 text-center max-w-prose mx-auto">
                            {text}<span className="typing-cursor"></span>
                        </div>
                    </div>
                    <div className={`mt-auto pt-6  ${darkMode ? 'border-white/10' : 'border-white/5'} transition-opacity duration-1000 ${showSignature ? 'opacity-100' : 'opacity-0'}`}>
    <div className="flex flex-col md:flex-row justify-between items-end gap-6">
                    {/* Right Side: Signature - U shtua 'md:self-start' për ta ngjitur lart në desktop */}
        <div className="relative w-full text-right self-start" style={{ top: '-2.5rem' }}>
    <div style={{ transform: 'translateY(-7mm)' }}>
  <div 
    className="font-signature text-3xl md:text-4xl text-cyan-500 neon-text -rotate-[15deg] origin-bottom-right" 
    style={{ textShadow: '0 0 10px rgba(6, 182, 212, 0.8)' }}
  >
    Agim Sherifi
    <span className="inline-block ml-3 text-slate-400 transform -rotate-[17deg]"><Icons.Feather className="w-6 h-6" /></span>
  </div>
</div>
</div>
        </div>
        </div>
                    {/* 3. Footer Area (Bottom) */}
                    <div className={`mt-auto pt-6 border-t ${darkMode ? 'border-white/10' : 'border-black/5'} transition-opacity duration-1000 ${showSignature ? 'opacity-100' : 'opacity-0'}`}>
    {/* Kalohet nga justify-between në justify-center për të centruar përmbajtjen */}
    {/* Items-end ndryshohet në items-center për të centruar vertikalisht (nëse do kishte elemente në të djathtë) */}
    <div className="flex flex-col md:flex-row justify-center items-center gap-6"> 
        
        {/* Left Side: Actions (Print, Bookmark, Rate) - Kjo rri poshtë për shkak të items-end te prindi */}
        {/* Ndryshoni items-start në items-center dhe hiqni w-full, vendosni w-auto */}
        <div className="flex flex-col gap-3 items-center w-auto"> 
            
            {/* Print Button */}
            <button onClick={() => onPrintRequest(poem, 'poem')} className="flex items-center gap-3 text-xs font-bold uppercase tracking-widest opacity-60 hover:opacity-100 hover:text-cyan-500 transition-all group">
                <span className="p-2 rounded-full bg-black/5 dark:bg-white/5 group-hover:bg-cyan-500/10"><Icons.Printer className="w-4 h-4" /></span>
                Printo Kartën
            </button>
            
            {/* Bookmark Button */}
            <button onClick={handleBookmark} className="flex items-center gap-3 text-xs font-bold uppercase tracking-widest opacity-60 hover:opacity-100 hover:text-yellow-500 transition-all group">
                <span className="p-2 rounded-full bg-black/5 dark:bg-white/5 group-hover:bg-yellow-500/10">
                    {bookmarks.isBookmarked(poem.id, 'poem') ? <Icons.BookmarkFilled className="w-4 h-4 text-yellow-500" /> : <Icons.Bookmark className="w-4 h-4" />}
                </span>
                {bookmarks.bookmarks.some(b => b.itemId === poem.id && b.type === 'poem') ? 'E ruajtur' : 'Ruaj në koleksion'}
            </button>

            {/* Rating Component */}
            {/* Hidhni origin-left ose vendosni origin-center nëse dëshironi të centroni transformimin */}
            <div className="mt-2 scale-90 origin-center"> 
                <PoemRating poemId={poem.id} darkMode={darkMode} />
            </div>
        </div>
        
    </div>
</div>
                </div>

                {/* Recommendations (Below the card content) */}
                <div className="mt-8 pt-4 border-t border-dashed border-gray-500/20">
                    <SmartRecommendations 
                        darkMode={darkMode} 
                        currentItemId={poem.id} 
                        currentItemType="poem" 
                    />
                </div>
            </div>
        </div>
    );
};

        const ViewModal = ({ item, isOpen, onClose, darkMode, onPrintRequest, bookmarks }) => {
            if (!isOpen || !item) return null;
            const bgClass = darkMode ? 'bg-slate-900 border-slate-700' : 'bg-white border-slate-200';
            const textClass = darkMode ? 'text-white' : 'text-slate-900';
            
            // Identifikojmë nëse është Thënie (ka tekst)
            const isQuote = item.text || item.fullText || item.content;

            useEffect(() => {
                if (isOpen && item.seoTitle) {
                    document.title = item.seoTitle + " | Agim Sherifi";
                    const metaDesc = document.querySelector('meta[name="description"]');
                    if (metaDesc && item.seoDescription) {
                        metaDesc.setAttribute('content', item.seoDescription);
                    }
                }
            }, [isOpen, item]);

            const handleBookmark = (e) => {
                e.stopPropagation();
                
                if (bookmarks.isBookmarked(item.id, 'quote')) {
                    const bookmarkId = bookmarks.getBookmarkId(item.id, 'quote');
                    if (bookmarkId) {
                        bookmarks.removeBookmark(bookmarkId);
                    }
                } else {
                    bookmarks.addBookmark(item, 'quote');
                }
            };

            return (
                <div className="fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-fade-in">
    
    <div className={`relative w-full max-w-5xl rounded-2xl shadow-2xl overflow-hidden flex flex-col h-[85vh] md:h-[90vh] animate-slide-in-right ${bgClass}`}>
        
        {/* BUTONI X (Lart Djathtas) */}
        <button 
            onClick={onClose} 
            className="absolute top-3 right-3 z-50 p-2 bg-black/60 rounded-full text-white hover:bg-red-500 hover:text-white transition-all backdrop-blur-md border border-white/10"
        >
            <Icons.X className="w-5 h-5 md:w-6 md:h-6" />
        </button>

        {/* STRUKTURA E BRENDSHME */}
        <div className="flex flex-col md:flex-row h-full w-full overflow-hidden">
            
            {/* 1. IMAZHI */}
            <div 
                className={`w-full md:w-5/12 h-48 md:h-full shrink-0 bg-cover bg-center relative ${!item.image && !item.url ? 'hidden md:flex bg-slate-800 items-center justify-center' : ''}`} 
                style={item.image || item.url ? { backgroundImage: `url(${item.image || item.url})` } : {}}
            >
                <div className="absolute inset-0 bg-gradient-to-b from-black/60 via-transparent to-transparent md:hidden"></div>
                {!item.image && !item.url && <Icons.Feather className="w-24 h-24 text-cyan-500 opacity-20" />}
            </div>

            {/* 2. PËRMBAJTJA (Djathtas) - NDRYSHIMI ESHTE KETU POSHTE */}
            {/* U ndryshua 'h-full' në 'flex-1 md:h-full min-h-0'. Kjo e rregullon prerjen në celular. */}
            <div className={`w-full md:w-7/12 flex flex-col flex-1 md:h-full min-h-0 ${darkMode ? 'bg-slate-900' : 'bg-white'}`}>
                
                {/* A. ZONA E TEKSTIT (SCROLLABLE) */}
                <div className="flex-1 overflow-y-auto p-5 md:p-8 custom-scrollbar">
                    
                    {/* Kategoria */}
                    <div className="flex items-center gap-3 mb-4">
                         <span className="px-3 py-1 rounded-md bg-cyan-500/10 text-cyan-500 text-xs font-bold uppercase tracking-widest border border-cyan-500/20">
                            {item.category || "Arkiva"}
                        </span>
                        <div className="h-px flex-1 bg-gradient-to-r from-cyan-500/30 to-transparent"></div>
                    </div>

                    {/* Titulli */}
                    <h2 className={`text-2xl md:text-3xl font-serif font-bold mb-6 ${textClass} leading-tight`}>
                        {item.text ? "Thënie" : item.title}
                    </h2>

                    {/* Teksti Kryesor */}
                    <div className={`prose max-w-none ${darkMode ? 'prose-invert text-slate-300' : 'text-slate-600'} leading-loose text-lg whitespace-pre-line`}>
                        {item.fullText || item.content || item.description || item.text || item.desc}
                    </div>

                    {/* Autorësia */}
                    <div className="mt-8 pt-6 border-t border-dashed border-gray-700/50 flex flex-wrap gap-4 justify-between items-center">
                         <div className="flex gap-2">
                            {isQuote && (
                                <button onClick={() => onPrintRequest(item, 'quote')} className="p-2 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-500 hover:text-cyan-500 transition-colors" title="Printo">
                                    <Icons.Printer className="w-5 h-5" />
                                </button>
                            )}
                            <button onClick={handleBookmark} className={`p-2 rounded-lg transition-colors ${bookmarks.isBookmarked(item.id, 'quote') ? 'bg-yellow-500/10 text-yellow-500' : 'bg-slate-100 dark:bg-slate-800 text-slate-500 hover:text-yellow-500'}`} title="Ruaj">
                                {bookmarks.isBookmarked(item.id, 'quote') ? <Icons.BookmarkFilled className="w-5 h-5" /> : <Icons.Bookmark className="w-5 h-5" />}
                            </button>
                        </div>
                        <div className="font-signature text-2xl text-cyan-500 neon-text opacity-80 rotate-[-5deg]">
                            Agim Sherifi
                        </div>
                    </div>

                    {/* Rekomandimet */}
                    {item.id && (
                        <div className="mt-8 pb-4">
                             <SmartRecommendations 
                                darkMode={darkMode} 
                                currentItemId={item.id} 
                                currentItemType="quote" 
                            />
                        </div>
                    )}
                </div>

                {/* B. FOOTER FIKS (Tani do të shfaqet saktë në celular) */}
                <div className={`shrink-0 p-4 md:p-6 border-t z-10 flex justify-between items-center shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] ${darkMode ? 'border-slate-800 bg-slate-900' : 'border-slate-100 bg-gray-50'}`}>
                    
                    <span className="text-cyan-600 dark:text-cyan-400 font-mono text-sm md:text-base font-medium">
                        {item.price || item.date || item.year || "2025"}
                    </span>
                    
                    <button 
    onClick={onClose} 
    className="px-6 md:px-8 py-2 md:py-2.5 rounded-full font-bold text-xs md:text-sm bg-gradient-to-r from-cyan-400 to-cyan-600 text-white hover:shadow-lg hover:shadow-cyan-400/50 transform hover:-translate-y-0.5 transition-all active:scale-95"
>
    Mbyll Dritaren
</button>
                </div>

            </div>
        </div>
    </div>
</div>
            );
        };

        const CheckoutModal = ({ item, isOpen, onClose, darkMode, t }) => {
    if (!isOpen) return null;
    
    // ----------------------------------------------------------------------
    // 1. ZONA E LOGJIKËS DHE GJENDJES (STATE) - E RE
    // ----------------------------------------------------------------------
    const [step, setStep] = useState(1);
    
    // Gjendja për të ruajtur tekstin e zgjedhur (p.sh. "Shtyp në Canvas (+35€)")
    const [productType, setProductType] = useState('Printim në Letër (Standard)');
    
    // Gjendja E RE për të ruajtur ÇMIMIN NUMERIK të shtesës (p.sh. 35)
    const [selectedExtraPrice, setSelectedExtraPrice] = useState(0); 

    // Llogaritja e Totalit të Fundit (Çmimi Bazë + Shtesa e Zgjedhur)
    // Sigurohuni që item.price konvertohet në numër (në rast se është string)
    const totalCalculated = parseFloat(item.price) + selectedExtraPrice;
    
    // ----------------------------------------------------------------------
    
    const bgClass = darkMode ? 'bg-slate-900 border-slate-700' : 'bg-white border-slate-200';
    const textClass = darkMode ? 'text-white' : 'text-slate-900';
    const inputClass = darkMode ? 'w-full bg-slate-800 border-slate-700 text-white rounded p-3 focus:outline-none focus:border-cyan-500' : 'w-full bg-slate-50 border-slate-200 text-slate-900 rounded p-3 focus:outline-none focus:border-cyan-500';

    return (
        <div className="fixed inset-0 z-[120] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in">
            <div className={`relative w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] ${bgClass}`}>
                <div className="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                    <h3 className={`text-xl font-bold font-serif ${textClass}`}>{step === 1 ? t.modal.title : "Kuponi Fiskal"}</h3>
                    <button onClick={onClose} className="p-2"><Icons.X className={`w-6 h-6 ${textClass}`} /></button>
                </div>
                <div className="p-6 overflow-y-auto">
                    {step === 1 ? (
                        <div className="space-y-6">
                            <div className={`flex items-center space-x-4 p-4 rounded-lg ${darkMode ? 'bg-slate-800' : 'bg-cyan-50'}`}>
                                <img src={item.image || item.url} alt="Item" className="w-16 h-16 object-cover rounded" />
                                <div className="flex-1">
                                    <p className={`font-bold ${textClass}`}>{item.text ? "Thënie" : item.title}</p>
                                    <p className="text-cyan-600 font-mono text-sm">{item.price}</p>
                                </div>
                            </div>
                            <div className="space-y-4">
                                <input className={inputClass} placeholder="Emri dhe Mbiemri" />
                                <input className={inputClass} placeholder="Email (për konfirmim)" type="email" />
                                
                                {/* ---------------------------------------------------------------------- */}
                                {/* 2. ZËVENDËSIMI I SELECT PËR TË RUAJTUR ÇMIMIN SHTESË */}
                                {/* ---------------------------------------------------------------------- */}
                                <div className="space-y-1">
                                    <label className={`text-xs uppercase font-bold tracking-wider ml-1 ${darkMode ? 'text-slate-400' : 'text-slate-500'}`}>Zgjidh Modelin:</label>
                                    <select 
                                        value={productType} 
                                        onChange={(e) => {
                                            const selectedText = e.target.selectedOptions[0].text; // Merr p.sh. "Shtyp në Canvas (+35€)"
                                            const priceValue = parseFloat(e.target.value); // Merr çmimin numerik p.sh. 35
                                            
                                            setProductType(selectedText); 
                                            setSelectedExtraPrice(priceValue);
                                        }} 
                                        className={inputClass}
                                    >
                                        {/* TANI VLERAT JANE VETEM NUMRA (ÇMIMET E SHTESAVE) */}
                                        <option value="0">Printim në Letër (Standard)</option>
                                        <option value="20">Shtyp në Guri (+20€)</option>
                                        <option value="35">Shtyp në Canvas (+35€)</option>
                                        <option value="25">Shtyp në Dru (+25€)</option>
                                    </select>
                                </div>
                                {/* ---------------------------------------------------------------------- */}

                                <input className={inputClass} placeholder="Adresa" />
                                <input className={inputClass} placeholder="Nr. Telefonit" />
                            </div>
                            <div className="text-red-500 text-sm font-bold flex items-center gap-2">
                                <Icons.Truck className="w-6 h-6 text-red-600" /> Aktualisht nuk marrim porosi për transport.
                                {/*<Icons.Truck className="w-4 h-4" /> Transporti: Falas*/}
                            </div>
                            
                            {/* 3. ZËVENDËSIMI I TOTALIT NË HAPIN 1 */}
                            <div className={`flex justify-between text-lg font-bold ${textClass}`}>
    <span className="text-slate-400">TOTALI (Përafërt):</span>
    <span className="text-slate-400">{totalCalculated.toFixed(2)}€</span>
</div>
                            
                            <button onClick={() => setStep(2)} className="w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-4 rounded-lg shadow-lg">{t.modal.confirm}</button>
                        </div>
                    ) : (
                        <div className="flex flex-col items-center">
                            <div className="bg-white text-slate-900 p-6 w-full font-mono-receipt receipt rounded-sm shadow-xl relative mb-6">
                                <div className="text-center border-b-2 border-dashed border-slate-300 pb-4 mb-4">
                                    <h2 className="text-xl font-bold uppercase tracking-widest">Agim Sherifi</h2>
                                    <p className="text-xs">Art & Robotikë Portfolio</p>
                                    <p className="text-xs text-slate-500 mt-1">{new Date().toLocaleDateString()} {new Date().toLocaleTimeString()}</p>
                                </div>
                                <div className="space-y-2 mb-4 text-sm">
                                    <div className="flex justify-between"><span>Artikulli:</span><span className="font-bold">{item.text ? "Thënie" : item.title}</span></div>
                                    
                                    <div className="flex justify-between"><span>Modeli:</span><span className="font-bold text-xs max-w-[150px] text-right">{productType}</span></div>
                                    
                                    <div className="flex justify-between"><span>Çmimi Bazë:</span><span>{parseFloat(item.price).toFixed(2)}€</span></div>
                                    <div className="flex justify-between"><span>Shtesa Modeli:</span><span className="font-bold text-red-600">{selectedExtraPrice.toFixed(2)}€</span></div>
                                    <div className="flex justify-between text-green-600"><span>Transporti:</span><span>FALAS</span></div>
                                </div>
                                <div className="border-t-2 border-dashed border-slate-300 pt-2 mb-6">
                                    {/* 4. ZËVENDËSIMI I TOTALIT NË HAPIN 2 (Kuponi Fiskal) */}
                                    <div className="flex justify-between text-lg font-bold">
                                        <span>TOTALI:</span>
                                        <span>{totalCalculated.toFixed(2)}€</span> 
                                    </div>
                                </div>
                                <div className="text-center border-2 border-red-500 text-red-500 font-bold p-2 rotate-[-5deg] opacity-70 mb-4 inline-block w-full">REFUZUAR / REFUSED</div>
                                <div className="text-center text-xs text-slate-500"><p>Faleminderit për mbështetjen!</p><p>www.agimsherifi.com</p></div>
                            </div>
                            <p className="text-slate-400 text-sm mb-4 text-center">{t.modal.note}</p>
                            <button onClick={onClose} className="bg-cyan-600 hover:bg-cyan-500 text-white px-8 py-3 rounded-full font-bold">Mbyll</button>
                        </div>
                    )}
                </div>
            </div>
        </div>
    );
};

        const NewsletterModal = ({ isOpen, onClose, t, darkMode }) => {
            if (!isOpen) return null;
            const [submitted, setSubmitted] = useState(false);

            const handleSubmit = (e) => {
                e.preventDefault();
                setSubmitted(true);
                setTimeout(() => {
                    setSubmitted(false);
                    onClose();
                }, 2000);
            };

            return (
                <div className="fixed inset-0 z-[130] flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-fade-in">
                    <div className={`w-full max-w-md rounded-2xl p-8 relative ${darkMode ? 'bg-slate-900 border border-cyan-900' : 'bg-white shadow-xl'}`}>
                        <button onClick={onClose} className="absolute top-4 right-4 z-50 p-3 bg-black/10 dark:bg-white/10 rounded-full text-slate-500 dark:text-slate-400 hover:text-cyan-500 hover:bg-black/20 transition-all"><Icons.X className="w-6 h-6" /></button>

                        {!submitted ? (
                            <>
                                <h2 className="text-2xl font-serif text-cyan-600 mb-4 flex items-center gap-3">
                                    <Icons.Mail className="w-6 h-6" /> {t.newsletter.title}
                                </h2>
                                <p className={`mb-6 text-sm ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>{t.newsletter.desc}</p>
                                <form onSubmit={handleSubmit} className="space-y-4">
                                    <input
                                        required
                                        type="email"
                                        className={`w-full p-3 rounded border outline-none focus:border-cyan-500 ${darkMode ? 'bg-slate-800 border-slate-700 text-white' : 'bg-slate-100 border-slate-300'}`}
                                        placeholder={t.newsletter.placeholder}
                                    />
                                    <button className="w-full py-3 bg-cyan-600 text-white font-bold rounded hover:bg-cyan-500 shadow-lg shadow-cyan-500/30 transition-all transform hover:-translate-y-1">
                                        {t.newsletter.subscribe}
                                    </button>
                                </form>
<div className="mt-4 space-y-2">
    <label className="flex items-center gap-2">
        <input type="checkbox" defaultChecked className="rounded" />
        <span className="text-sm">Dëshiroj njoftime për poezi të reja</span>
    </label>
    <label className="flex items-center gap-2">
        <input type="checkbox" defaultChecked className="rounded" />
        <span className="text-sm">Dëshiroj njoftime për thënie të reja</span>
    </label>
    <label className="flex items-center gap-2">
        <input type="checkbox" className="rounded" />
        <span className="text-sm">Dëshiroj njoftime për fotografi</span>
    </label>
</div>
                            </>
                            
                        ) : (
                            <div className="text-center py-8">
                                <div className="text-green-500 flex justify-center mb-4"><Icons.CheckCircle className="w-16 h-16" /></div>
                                <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-slate-900'}`}>{t.newsletter.success}</h3>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const Navigation = ({ darkMode, setDarkMode, currentView, onNavigate, lang, setLang, t, onRequest }) => {
            const [isScrolled, setIsScrolled] = useState(false);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            useEffect(() => {
                const handleScroll = () => setIsScrolled(window.scrollY > 50);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);
            const navLinks = [
                { name: t.nav.home, id: 'home' },
                { name: t.nav.quotes, id: 'quotes' },
                { name: t.nav.poems, id: 'poems' },
                { name: t.nav.gallery, id: 'gallery' },
                { name: t.nav.about, id: 'about' },
                { name: '', id: 'bookmarks', icon: Icons.Bookmark },
            ];
            return (
                <nav className={`fixed w-full z-50 transition-all duration-300 ${isScrolled ? (darkMode ? 'bg-slate-900/90 backdrop-blur-md shadow-lg border-b border-cyan-900/30' : 'bg-white/90 backdrop-blur-md shadow-lg border-b border-cyan-100') : 'bg-transparent'}`}>
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex justify-between items-center h-20">
                            <div className="flex-shrink-0 cursor-pointer" onClick={() => onNavigate('home')}>
                                <h1 className={`font-serif text-2xl font-bold tracking-wider ${darkMode ? 'text-white' : 'text-slate-800'}`}>Agim<span className="text-cyan-500">.</span>S</h1>
                            </div>
                            <div className="hidden md:flex space-x-6 items-center">
                                {navLinks.map((link) => (
                                    <button key={link.id} onClick={() => onNavigate(link.id)} className={`text-sm font-medium tracking-wide transition-colors duration-300 hover:text-cyan-500 flex items-center gap-1 ${currentView === link.id ? 'text-cyan-500' : (darkMode ? 'text-slate-300' : 'text-slate-600')}`}
                                        aria-label={link.name || 'Bookmarks'}
                                        tabIndex={0}
                                    >
                                        {link.icon ? <link.icon className="w-5 h-5" /> : link.name}
                                    </button>
                                ))}
                                <div className="w-[1px] h-4 bg-slate-600 mx-2"></div>
                                <button onClick={() => setLang(lang === 'sq' ? 'en' : 'sq')} className={`p-1.5 rounded transition-colors flex items-center gap-1 text-xs font-bold border ${darkMode ? 'border-slate-700 text-slate-300' : 'border-slate-200 text-slate-600'}`}>{lang.toUpperCase()}<Icons.Globe className="w-3 h-3" /></button>
                                <button onClick={() => setDarkMode(!darkMode)} className={`p-2 rounded-full transition-colors ${darkMode ? 'text-yellow-400' : 'text-slate-600'}`}>{darkMode ? <Icons.Sun className="w-5 h-5" /> : <Icons.Moon className="w-5 h-5" />}</button>
                            </div>
                            <div className="md:hidden flex items-center space-x-4">
                                <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className={darkMode ? 'text-white' : 'text-slate-800'}>
                                    {mobileMenuOpen ? <Icons.X className="w-7 h-7" /> : <Icons.Feather className="w-7 h-7" />}
                                </button>
                            </div>
                        </div>
                    </div>
                    {mobileMenuOpen && (
                        <div className={`md:hidden absolute w-full h-screen ${darkMode ? 'bg-slate-900' : 'bg-white'} z-40 flex flex-col items-center justify-center gap-8`}>
                            {navLinks.map((link) => (
                                <button key={link.id} onClick={() => { onNavigate(link.id); setMobileMenuOpen(false); }} className={`text-2xl font-serif flex items-center gap-2 ${darkMode ? 'text-white' : 'text-slate-900'}`}>
                                    {link.icon && <link.icon className="w-6 h-6" />}
                                    {link.name}
                                </button>
                            ))}
                            <div className="flex gap-6 mt-4">
                                <button onClick={() => setLang(lang === 'sq' ? 'en' : 'sq')} className={`flex items-center gap-2 text-lg font-bold border px-4 py-2 rounded ${darkMode ? 'border-slate-700 text-slate-300' : 'border-slate-200 text-slate-600'}`}>
                                    {lang.toUpperCase()} <Icons.Globe className="w-5 h-5" />
                                </button>
                                <button onClick={() => setDarkMode(!darkMode)} className={`p-3 rounded-full ${darkMode ? 'text-yellow-400 bg-slate-800' : 'text-slate-600 bg-slate-100'}`}>
                                    {darkMode ? <Icons.Sun className="w-6 h-6" /> : <Icons.Moon className="w-6 h-6" />}
                                </button>
                            </div>
                             <div className="flex gap-4 mt-8 pt-8 border-t border-slate-700/50">
                                {DATA.socials.map((item, i) => (
                                    <a 
                                        key={i} 
                                        href={item.link} 
                                        target="_blank" 
                                        rel="noopener noreferrer"
                                        className={`p-3 rounded-full transition-all cursor-pointer ${darkMode ? 'bg-slate-800 text-slate-300' : 'bg-slate-100 text-slate-600'}`}
                                    >
                                        <item.IconCmp className="w-6 h-6" />
                                    </a>
                                ))}
                            </div>
                        </div>
                    )}
                </nav>
            );
        };
        

        const QuoteCard = ({ quote, darkMode, onBuy, onView, t, bookmarks }) => {
            const [liked, setLiked] = useState(false);
            const [likesCount, setLikesCount] = useState(quote.likes);
            const [isBookmarked, setIsBookmarked] = useState(bookmarks.isBookmarked(quote.id, 'quote'));
            
            useEffect(() => {
                const storedLike = localStorage.getItem(`liked_quote_${quote.id}`);
                if (storedLike) setLiked(true);
            }, [quote.id]);

            useEffect(() => {
                setIsBookmarked(bookmarks.isBookmarked(quote.id, 'quote'));
            }, [bookmarks.bookmarks]);

            const handleLike = () => {
                if (liked) return;
                setLikesCount(likesCount + 1);
                setLiked(true);
                localStorage.setItem(`liked_quote_${quote.id}`, 'true');
            };

            const handleBookmark = (e) => {
                e.stopPropagation();
                
                if (isBookmarked) {
                    const bookmarkId = bookmarks.getBookmarkId(quote.id, 'quote');
                    if (bookmarkId) {
                        bookmarks.removeBookmark(bookmarkId);
                        setIsBookmarked(false);
                    }
                } else {
                    bookmarks.addBookmark(quote, 'quote');
                    setIsBookmarked(true);
                }
            };

            return (
                <div className={`tilt-card group relative break-inside-avoid mb-6 rounded-2xl overflow-hidden transition-all duration-500 hover:-translate-y-2 glass-panel hover:shadow-[0_0_30px_rgba(6,182,212,0.15)] hover-lift will-change-transform`}>
                    <TiltCard className="h-full">
                        <div className="relative h-56 overflow-hidden cursor-pointer" onClick={() => onView(quote)}>
                            <div className={`absolute inset-0 bg-gradient-to-t ${darkMode ? 'from-slate-900' : 'from-white via-white/70'} to-transparent z-10`}></div>
                            <img src={quote.image} alt="Background" className="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110" />
                            <div className="absolute bottom-4 left-4 z-20"><span className="text-[10px] font-bold text-cyan-400 uppercase tracking-widest bg-black/60 backdrop-blur px-3 py-1 rounded border border-cyan-500/20">{quote.category}</span></div>
                            <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-700 z-20">
                                <span className="font-signature text-4xl text-cyan-400 neon-text -rotate-6">Agim Sherifi</span>
                            </div>
                            <div className="absolute top-4 right-4 bg-black/50 p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-30">
                                <Icons.Eye className="w-5 h-5 text-white" />
                            </div>
                        </div>
                        <div className="p-6 relative z-30">
                            <div className="absolute -top-10 right-4 p-3 rounded-full bg-cyan-500 shadow-lg shadow-cyan-500/40 text-white z-50 transform group-hover:scale-110 transition-transform"><Icons.Feather className="w-5 h-5" /></div>
                            <p className={`font-serif text-lg leading-relaxed italic mb-6 ${darkMode ? 'text-slate-200' : 'text-slate-700'}`}>"{quote.text}"</p>
                            <div className="flex justify-between items-center mb-4">
                                <button onClick={() => onView(quote)} className="text-xs font-bold text-cyan-500 hover:text-cyan-400 uppercase tracking-wider flex items-center gap-1"
                                    aria-label={`Lexo thënien e plotë: ${quote.text.substring(0, 50)}...`}
                                    tabIndex={0}
                                    onKeyDown={(e) => e.key === 'Enter' && onView(quote)}
                                >
                                    {t.quotes.readFull} <Icons.ArrowRight className="w-3 h-3" />
                                </button>
                            </div>
                            <div className={`flex items-center justify-between border-t border-dashed ${darkMode ? 'border-slate-700' : 'border-slate-300'} pt-4`}>
                                <div className="flex gap-3">
                                    <button onClick={handleBookmark} className={`flex items-center gap-1 text-sm ${isBookmarked ? 'text-yellow-500' : 'text-slate-400 hover:text-yellow-400'}`}>
                                        {isBookmarked ? <Icons.BookmarkFilled className="w-4 h-4" /> : <Icons.Bookmark className="w-4 h-4" />}
                                    </button>
                                    <button onClick={handleLike} className={`flex items-center gap-1 text-sm ${liked ? 'text-red-500' : 'text-slate-400 hover:text-red-400'}`}><Icons.Heart className="w-4 h-4" /> {likesCount}</button>
                                    
                                    {/* Social Share Suite */}
                                    <div className={`flex gap-2 text-slate-400 border-l ${darkMode ? 'border-slate-700' : 'border-slate-300'} pl-3`}>
                                        <SocialShareSuite item={quote} type="quote" darkMode={darkMode} />
                                    </div>
                                </div>
                                <button onClick={() => onBuy(quote)} className="text-cyan-500 hover:text-cyan-700 transition-colors text-xs font-bold uppercase tracking-wider flex items-center gap-1">{t.quotes.buy} <Icons.Cart className="w-3 h-3" /></button>
                            </div>
                        </div>
                    </TiltCard>
                </div>
            );
        };

        const QuotesSection = ({ darkMode, onBuy, onView, t, bookmarks }) => {
            const [filter, setFilter] = useState('Të gjitha');
            const [search, setSearch] = useState('');
            const categories = ['Të gjitha', ...new Set(DATA.quotes.map(q => q.category))];
            const filteredQuotes = DATA.quotes.filter(q => {
                const matchesCat = filter === 'Të gjitha' || q.category === filter;
                const matchesSearch = q.text.toLowerCase().includes(search.toLowerCase());
                return matchesCat && matchesSearch;
            });
            
            // SEO for quotes page
            useEffect(() => {
                document.title = "Thënie të zgjedhura - Agim Sherifi | Portofol Kinematik";
                const metaDesc = document.querySelector('meta[name="description"]');
                if (metaDesc) {
                    metaDesc.setAttribute('content', 'Koleksion i thënieve të zgjuara nga Agim Sherifi. Filozofi, robotikë, dashuri dhe motivim në formë të thënieve të thella.');
                }
            }, []);

            return (
                <section id="quotes" className={`py-24 relative min-h-screen z-10`}>
                    <SEOManager 
                        title="Thënie të zgjedhura - Agim Sherifi"
                        description="Koleksion i thënieve të zgjuara nga Agim Sherifi. Filozofi, robotikë, dashuri dhe motivim në formë të thënieve të thella."
                        url="/thenie"
                        type="website"
                    />
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="text-center mb-16 animate-fade-in">
                            <h1 className={`text-5xl md:text-6xl font-serif font-bold mb-4 neon-text ${darkMode ? 'text-white' : 'text-slate-900'}`}>{t.quotes.title}</h1>
                            <p className={`max-w-2xl mx-auto text-lg ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>{t.quotes.subtitle}</p>
                            <div className="mt-10 flex flex-col md:flex-row justify-center items-center gap-4">
                                <div className={`relative group w-full md:w-64 glass-panel rounded-full flex items-center px-4 transition-all ${darkMode ? 'bg-slate-900/50' : 'bg-white border border-slate-200'}`}>
                                    <Icons.Search className="w-5 h-5 text-slate-400 mr-2" />
                                    <input value={search} onChange={(e) => setSearch(e.target.value)} placeholder={t.quotes.search} className="bg-transparent border-none outline-none py-3 w-full text-sm text-slate-300 placeholder-slate-500" />
                                </div>
                                <div className="flex flex-wrap justify-center gap-2">
                                    {categories.map(cat => (
                                        <button key={cat} onClick={() => setFilter(cat)} className={`px-4 py-2 rounded-full text-xs font-bold uppercase tracking-widest transition-all ${filter === cat ? 'bg-cyan-500 text-white shadow-lg shadow-cyan-500/40' : (darkMode ? 'bg-slate-800 text-slate-400 hover:text-white' : 'bg-slate-200 text-slate-600')}`}>{cat}</button>
                                    ))}
                                </div>
                            </div>
                        </div>
                        <div className="columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6">
                            {filteredQuotes.map(quote => <QuoteCard key={quote.id} quote={quote} darkMode={darkMode} onBuy={onBuy} onView={onView} t={t} bookmarks={bookmarks} />)}
                        </div>
                    </div>
                </section>
            );
        };

        const Hero = ({ darkMode, onNavigate, t }) => {
            const [textIndex, setTextIndex] = useState(0);
            const [displayText, setDisplayText] = useState('');
            const [isDeleting, setIsDeleting] = useState(false);
            const texts = DATA.profile.titles;
            useEffect(() => {
                const currentText = texts[textIndex];
                let timer;
                if (isDeleting) {
                    timer = setTimeout(() => {
                        setDisplayText(currentText.substring(0, displayText.length - 1));
                    }, 50);
                } else {
                    timer = setTimeout(() => {
                        setDisplayText(currentText.substring(0, displayText.length + 1));
                    }, 100);
                }
                if (!isDeleting && displayText === currentText) {
                    timer = setTimeout(() => setIsDeleting(true), 2000);
                } else if (isDeleting && displayText === '') {
                    setIsDeleting(false);
                    setTextIndex((prev) => (prev + 1) % texts.length);
                }
                return () => clearTimeout(timer);
            }, [displayText, isDeleting, textIndex]);

            return (
                <section id="hero" className="relative h-screen flex items-center justify-center overflow-hidden z-10">
                    <SEOManager 
                        title="Agim Sherifi - Portofol Kinematik | Robotikë & Poezi"
                        description="Aty ku logjika e ftohtë e kodit takohet me ngrohtësinë e pafundme të vargut. Një portofol kinematik i Agim Sherifit."
                        url="/"
                        type="website"
                    />
                    <div className="text-center px-4 max-w-5xl mx-auto animate-fade-in">
                        <div className="mb-8 flex justify-center items-center space-x-6 opacity-70">
                            <div className="h-[1px] w-16 bg-cyan-500"></div>
                            <div className="flex items-center gap-4 text-cyan-500">
                                <div className="animate-spin-slow"><Icons.Cpu className="w-10 h-10" /></div>
                                <div className="animate-writing"><Icons.Feather className="w-8 h-8" /></div>
                            </div>
                            <div className="h-[1px] w-16 bg-cyan-500"></div>
                        </div>
                        <h1 className={`text-6xl md:text-9xl font-cinematic font-bold mb-8 tracking-tighter neon-text ${darkMode ? 'text-white' : 'text-slate-900'}`}>{DATA.profile.name}</h1>
                        <div className="h-12 overflow-hidden mb-10">
                            <p className="text-lg md:text-xl font-mono tracking-[0.4em] uppercase text-cyan-400">
                                {displayText}<span className="typing-cursor">&nbsp;</span>
                            </p>
                        </div>
                        <p className={`text-xl md:text-2xl mb-12 max-w-3xl mx-auto leading-relaxed font-light ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>{t.hero.subtitle}</p>
                        <div className="flex flex-col sm:flex-row gap-6 justify-center">
                            <button onClick={() => onNavigate('quotes')} className="px-10 py-4 bg-cyan-600 hover:bg-cyan-500 text-white rounded-full font-bold shadow-[0_0_30px_rgba(6,182,212,0.4)] transition-all transform hover:-translate-y-1">{t.hero.readBtn}</button>
                            <button onClick={() => onNavigate('gallery')} className={`px-10 py-4 rounded-full font-bold border transition-all ${darkMode ? 'border-cyan-500 text-cyan-400 hover:border-white hover:text-white hover:bg-white/5' : 'border-slate-300 text-slate-700 hover:border-cyan-600 hover:text-cyan-600 hover:bg-cyan-50'}`}>{t.hero.galleryBtn}</button>
                        </div>
                    </div>
                    <div className="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce cursor-pointer" onClick={() => onNavigate('quotes')}><Icons.ChevronDown className={`w-8 h-8 opacity-50 ${darkMode ? 'text-white' : 'text-slate-900'}`} /></div>
                </section>
            );
            
        };

        const PoetrySection = ({ darkMode, t, onView, bookmarks }) => {
            const [inspirationFor, setInspirationFor] = useState(null);
            
            // SEO for poems page
            useEffect(() => {
                document.title = "Poezi dhe prozë - Agim Sherifi | Art dhe Teknologji";
                const metaDesc = document.querySelector('meta[name="description"]');
                if (metaDesc) {
                    metaDesc.setAttribute('content', 'Koleksion i poezive të Agim Sherifit. Arti i fjalës që përputhet me teknologjinë. Poezi të thella për jetën, dashurinë dhe robotikën.');
                }
            }, []);

            const handleShare = (poem, platform) => {
                let url = '';
                const text = encodeURIComponent(`"${poem.title}" - Agim Sherifi`);
                const currentUrl = encodeURIComponent(`https://agimsherifi.com${poem.url || '/'}`);
                if (platform === 'facebook') url = `https://www.facebook.com/sharer/sharer.php?u=${currentUrl}&quote=${text}`;
                if (platform === 'whatsapp') url = `https://wa.me/?text=${text} ${currentUrl}`;
                if (platform === 'twitter') url = `https://twitter.com/intent/tweet?text=${text}&url=${currentUrl}`;
                window.open(url, '_blank');
            };

            const handleBookmark = (poem) => {
                if (bookmarks.isBookmarked(poem.id, 'poem')) {
                    const bookmarkId = bookmarks.getBookmarkId(poem.id, 'poem');
                    if (bookmarkId) bookmarks.removeBookmark(bookmarkId);
                } else {
                    bookmarks.addBookmark(poem, 'poem');
                }
            };

            return (
                <section id="poems" className={`py-24 relative min-h-screen z-10 ${darkMode ? '' : 'bg-slate-50'}`}>
                    <SEOManager 
                        title="Poezi dhe prozë - Agim Sherifi"
                        description="Koleksion i poezive të Agim Sherifit. Arti i fjalës që përputhet me teknologjinë. Poezi të thella për jetën, dashurinë dhe robotikën."
                        url="/poezi"
                        type="website"
                    />
                    <div className="max-w-4xl mx-auto px-4">
                        <div className="text-center mb-16">
                            <div className="inline-block p-4 rounded-full bg-cyan-500/10 mb-4"><Icons.Feather className="w-8 h-8 text-cyan-500" /></div>
                            <h1 className={`text-4xl md:text-5xl font-serif font-bold mb-4 ${darkMode ? 'text-white' : 'text-slate-900'}`}>Poezi & Prozë</h1>
                        </div>
                        <div className="space-y-6">
                            {DATA.poems.map(poem => {
                                const isBookmarked = bookmarks.isBookmarked(poem.id, 'poem');
                                return (
                                <div key={poem.id} className={`p-8 border-l-2 transition-all ${darkMode ? 'bg-slate-900/50 border-cyan-500 hover:bg-slate-800' : 'bg-white border-cyan-500 shadow-sm'}`}>
                                    <div className="flex justify-between items-start mb-4">
                                        <div>
                                            <h2 className={`text-2xl font-serif font-bold ${darkMode ? 'text-white' : 'text-slate-800'}`}>{poem.title}</h2>
                                            <StarDisplay rating={poem.rating} />
                                        </div>
                                        <span className="text-cyan-500 text-xs font-mono">{poem.date}</span>
                                    </div>
                                    <p className={`font-serif italic text-lg whitespace-pre-line ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>{poem.preview}</p>

                                    <div className="flex justify-between items-center mt-6 pt-4 border-t border-dashed border-slate-700">
                                        <div className="flex gap-4">
                                            <button onClick={() => onView(poem)} className="text-cyan-500 font-bold text-sm uppercase tracking-wide flex items-center gap-1 hover:text-cyan-400"
                                                aria-label={`Lexo poezinë: ${poem.title}`}
                                                tabIndex={0}
                                                role="button"
                                            >
                                                Lexo të plotë <Icons.ArrowRight className="w-4 h-4" />
                                            </button>
                                            
                                            {/* BUTONI PËR INSPIRIMIN ME ICON BULB */}
                                            <button 
                                                onClick={() => setInspirationFor(poem)}
                                                className="text-yellow-500 font-bold text-sm uppercase tracking-wide flex items-center gap-1 hover:text-yellow-400 transition-colors"
                                            >
                                                <Icons.Bulb className="w-4 h-4" />
                                            </button>
                                            
                                            <button onClick={() => handleBookmark(poem)} className="text-slate-500 font-bold text-sm uppercase tracking-wide flex items-center gap-1 hover:text-yellow-500">
                                                {isBookmarked ? (
                                                    <>
                                                        <Icons.BookmarkFilled className="w-4 h-4 text-yellow-500" />
                                                    </>
                                                ) : (
                                                    <>
                                                        <Icons.Bookmark className="w-4 h-4" />
                                                    </>
                                                )}
                                            </button>
                                        </div>

                                        <div className="flex gap-2 text-slate-400">
                                            <SocialShareSuite item={poem} type="poem" darkMode={darkMode} />
                                        </div>
                                    </div>
                                </div>
                            )})}
                        </div>
                    </div>
                    
                    {/* MODAL PËR INSPIRIMIN */}
                    {inspirationFor && (
                        <PoemInspirationModal 
                            poem={inspirationFor}
                            isOpen={!!inspirationFor}
                            onClose={() => setInspirationFor(null)}
                            darkMode={darkMode}
                        />
                    )}
                </section>
            );
        };

        const GallerySection = ({ darkMode, onBuy, t, onView }) => {
            // SEO for gallery page
            useEffect(() => {
                document.title = "Galeria Fotografike - Agim Sherifi | Art Vizual";
                const metaDesc = document.querySelector('meta[name="description"]');
                if (metaDesc) {
                    metaDesc.setAttribute('content', 'Galeria fotografike e Agim Sherifit. Fotografi artistike, peizazhe, portrete dhe art digjital. Eksploroni botën vizuale të artistit.');
                }
            }, []);

            const getBentoClass = (index) => {
                const i = index % 7; 
                if (i === 0) return 'md:col-span-2 md:row-span-2 h-96'; 
                if (i === 1) return 'md:col-span-1 md:row-span-2 h-96'; 
                if (i === 4) return 'md:col-span-2 md:row-span-1 h-48'; 
                return 'md:col-span-1 md:row-span-1 h-48'; 
            };

            return (
                <section id="gallery" className="py-24 relative min-h-screen z-10">
                    <SEOManager 
                        title="Galeria Fotografike - Agim Sherifi"
                        description="Galeria fotografike e Agim Sherifit. Fotografi artistike, peizazhe, portrete dhe art digjital. Eksploroni botën vizuale të artistit."
                        url="/galeria"
                        type="website"
                    />
                    <div className="max-w-7xl mx-auto px-4">
                        <h1 className={`text-4xl md:text-5xl font-serif font-bold mb-12 text-center ${darkMode ? 'text-white' : 'text-slate-900'}`}>Galeria</h1>
                        
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 auto-dense">
                            {DATA.photos.map((photo, idx) => (
                                <div 
                                    key={photo.id} 
                                    onClick={() => onView(photo)} 
                                    className={`group relative rounded-2xl overflow-hidden cursor-pointer shadow-lg hover:shadow-2xl transition-all duration-500 ${getBentoClass(idx)}`}
                                >
                                    <OptimizedImage 
                                        src={photo.url} 
                                        alt={photo.title}
                                        className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                                        lazy={true}
                                    />
                                    
                                    <div className="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4">
                                        <div className="transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300">
                                            <h2 className="text-white font-serif text-xl font-bold">{photo.title}</h2>
                                            <p className="text-cyan-400 text-xs uppercase tracking-widest mb-1">{photo.category}</p>
                                        </div>

                                        <button 
                                            onClick={(e) => { e.stopPropagation(); onBuy(photo); }} 
                                            className="absolute bottom-4 right-4 bg-white/10 backdrop-blur-md border border-white/20 text-white p-3 rounded-full hover:bg-cyan-600 hover:border-cyan-600 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0 hover:scale-110 hover:rotate-3 shadow-lg group-hover:delay-75 flex items-center gap-2 group/btn"
                                        >
                                            <span className="text-xs font-bold hidden group-hover/btn:inline-block">BLI</span>
                                            <Icons.Cart className="w-5 h-5" />
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </section>
            );
        };

        const CertificatesStrip = ({ darkMode, t }) => {
            const items = [...DATA.certificates, ...DATA.certificates];

            return (
                <div className="py-12 w-full overflow-hidden relative group">
                    <div className="flex items-center gap-4 mb-8 justify-center">
                        <span className="h-px w-12 bg-cyan-500"></span>
                        <span className="text-cyan-500 uppercase tracking-widest font-bold text-sm">{t.about.certificatesTitle}</span>
                        <span className="h-px w-12 bg-cyan-500"></span>
                    </div>

                    <div className={`absolute left-0 top-0 bottom-0 w-20 z-10 bg-gradient-to-r ${darkMode ? 'from-slate-900' : 'from-white'} to-transparent pointer-events-none`}></div>
                    <div className={`absolute right-0 top-0 bottom-0 w-20 z-10 bg-gradient-to-l ${darkMode ? 'from-slate-900' : 'from-white'} to-transparent pointer-events-none`}></div>

                    <div className="flex w-max animate-scroll pause-on-hover">
                        {items.map((cert, index) => (
                            <div key={`${cert.id}-${index}`} className="mx-6 relative group/cert">
                                <div className={`w-64 h-40 glass-panel rounded-xl overflow-hidden relative flex items-center justify-center p-2 transition-all duration-300 group-hover/cert:scale-105 group-hover/cert:border-cyan-500/50 ${darkMode ? 'bg-slate-800/40' : 'bg-white/80 border-slate-200'}`}>
                                    
                                    {cert.url ? (
                                        <OptimizedImage 
                                            src={cert.url} 
                                            alt={cert.title}
                                            className="w-full h-full object-cover rounded-lg opacity-80 group-hover/cert:opacity-100 transition-opacity"
                                            lazy={true}
                                        />
                                    ) : (
                                        <div className="text-center opacity-30">
                                            <Icons.Award className="w-12 h-12 mx-auto mb-2 text-cyan-500" />
                                            <span className="text-xs uppercase font-bold">{cert.title}</span>
                                        </div>
                                    )}

                                    <div className="absolute inset-0 bg-black/70 flex items-center justify-center opacity-0 group-hover/cert:opacity-100 transition-opacity duration-300">
                                        <span className="text-cyan-400 font-bold text-sm text-center px-2">{cert.title}</span>
                                    </div>
                                    
                                    <div className="absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-cyan-500/30 rounded-tr-xl"></div>
                                    <div className="absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-cyan-500/30 rounded-bl-xl"></div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const TimelineSection = ({ darkMode, t, onViewImage }) => {
            const [visibleItems, setVisibleItems] = useState({});
            
            useEffect(() => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            setVisibleItems(prev => ({ ...prev, [entry.target.dataset.index]: true }));
                        }
                    });
                }, { threshold: 0.3 });

                const elements = document.querySelectorAll('.timeline-card');
                elements.forEach(el => observer.observe(el));
                return () => observer.disconnect();
            }, []);

            return (
                <div className="py-20 mt-12 border-t border-slate-700/50">
                    <div className="flex items-center gap-4 mb-16 justify-center">
                        <span className="h-px w-12 bg-cyan-500"></span>
                        <span className="text-cyan-500 uppercase tracking-widest font-bold text-xl">{t.about.timelineTitle}</span>
                        <span className="h-px w-12 bg-cyan-500"></span>
                    </div>
                    
                    <div className="max-w-4xl mx-auto relative">
                        {/* Central Line */}
                        <div className={`absolute left-1/2 transform -translate-x-1/2 top-0 bottom-0 w-1 ${darkMode ? 'bg-cyan-900' : 'bg-cyan-100'}`}></div>

                        {DATA.timeline.map((item, index) => {
                            const isLeft = index % 2 === 0;
                            const isVisible = visibleItems[index];

                            return (
                                <div key={index} className={`relative flex items-center justify-between mb-12 ${isLeft ? 'flex-row-reverse' : ''}`}>
                                    {/* Empty Half */}
                                    <div className="w-5/12"></div>

                                    {/* Center Node */}
                                    <div className={`z-10 w-8 h-8 rounded-full border-4 flex items-center justify-center transition-all duration-500 ${isVisible ? 'scale-110 bg-cyan-500 border-cyan-200' : 'scale-75 bg-slate-700 border-slate-600'}`}>
                                        <div className="w-2 h-2 bg-white rounded-full"></div>
                                    </div>

                                    {/* Content Card */}
                                    <div 
                                        className={`w-5/12 timeline-card cursor-pointer group perspective-1000 opacity-0 ${isVisible ? (isLeft ? 'timeline-item-visible-left' : 'timeline-item-visible-right') : ''}`}
                                        data-index={index}
                                        onClick={() => onViewImage({ ...item, url: item.image, category: 'Timeline Memory' })}
                                    >
                                        <TiltCard className="h-full">
                                            <div className={`p-6 rounded-xl relative overflow-hidden transition-all duration-300 border hover:border-cyan-400 group-hover:shadow-[0_0_30px_rgba(6,182,212,0.2)] ${darkMode ? 'bg-slate-800/80 border-slate-700' : 'bg-white border-slate-200 shadow-lg'}`}>
                                                
                                                {/* Year Badge */}
                                                <div className="absolute top-0 right-0 bg-cyan-500 text-white px-3 py-1 rounded-bl-lg font-mono text-sm font-bold shadow-md">
                                                    {item.year}
                                                </div>

                                                <h3 className={`text-xl font-serif font-bold mb-2 mt-2 ${darkMode ? 'text-white' : 'text-slate-900'}`}>{item.title}</h3>
                                                <p className={`text-sm leading-relaxed mb-4 ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>{item.desc}</p>
                                                
                                                <div className="flex items-center text-cyan-500 text-xs font-bold uppercase tracking-wider group-hover:translate-x-2 transition-transform">
                                                    <Icons.Eye className="w-4 h-4 mr-2" /> Shiko Foto
                                                </div>

                                                {/* Hover Glow Effect */}
                                                <div className="absolute inset-0 bg-gradient-to-r from-cyan-500/0 via-cyan-500/5 to-cyan-500/0 transform translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 pointer-events-none"></div>
                                            </div>
                                        </TiltCard>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
        };

        const GuestbookSection = ({ darkMode, t }) => {
            const canvasRef = useRef(null);
            const [isDrawing, setIsDrawing] = useState(false);
            const [signatures, setSignatures] = useState(DATA.guestbook || []); 
            const [name, setName] = useState("");
            const [message, setMessage] = useState("");
            
            const lastPos = useRef({ x: 0, y: 0 });
            const lastTime = useRef(0);
            const velocity = useRef(0);

            useEffect(() => {
                const savedSigs = localStorage.getItem('guestbook_signatures');
                if (savedSigs) {
                    try {
                        const parsed = JSON.parse(savedSigs);
                        if(parsed.length > 0) setSignatures(parsed);
                    } catch(e) { console.error("Could not parse guestbook"); }
                }
            }, []);

            useEffect(() => {
                const canvas = canvasRef.current;
                if (canvas) {
                    canvas.width = canvas.offsetWidth;
                    canvas.height = canvas.offsetHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.lineCap = 'round';
                    ctx.lineJoin = 'round';
                }
            }, [darkMode]);

            const getPos = (e) => {
                const canvas = canvasRef.current;
                const rect = canvas.getBoundingClientRect();
                const clientX = e.clientX || e.touches[0].clientX;
                const clientY = e.clientY || e.touches[0].clientY;
                return {
                    x: clientX - rect.left,
                    y: clientY - rect.top
                };
            };

            const startDrawing = (e) => {
                if(e.type === 'touchstart') e.preventDefault();
                setIsDrawing(true);
                const pos = getPos(e);
                lastPos.current = pos;
                lastTime.current = Date.now();
                velocity.current = 0;
            };

            const draw = (e) => {
                if (!isDrawing) return;
                if(e.type === 'touchmove') e.preventDefault();
                
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                const pos = getPos(e);
                const time = Date.now();
                
                const dist = Math.sqrt(Math.pow(pos.x - lastPos.current.x, 2) + Math.pow(pos.y - lastPos.current.y, 2));
                const dt = time - lastTime.current;
                const newVelocity = dist / (dt || 1);

                velocity.current = velocity.current * 0.8 + newVelocity * 0.2;

                const minWidth = 1.5;
                const maxWidth = 5.5;
                const width = Math.max(minWidth, Math.min(maxWidth, maxWidth - (velocity.current * 1.5)));

                ctx.beginPath();
                ctx.moveTo(lastPos.current.x, lastPos.current.y);
                ctx.lineTo(pos.x, pos.y);
                
                ctx.strokeStyle = darkMode ? '#06b6d4' : '#0e7490';
                ctx.lineWidth = width;
                
                ctx.shadowBlur = 2;
                ctx.shadowColor = darkMode ? 'rgba(6, 182, 212, 0.4)' : 'rgba(14, 116, 144, 0.2)';
                
                ctx.stroke();
                
                lastPos.current = pos;
                lastTime.current = time;
            };

            const stopDrawing = () => {
                setIsDrawing(false);
            };

            const clearCanvas = () => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            };

            const saveSignature = () => {
                if (!name || !message) {
                    alert("Ju lutem shkruani emrin dhe mesazhin!");
                    return;
                }
                const canvas = canvasRef.current;
                const dataUrl = canvas.toDataURL();
                
                const newEntry = {
                    id: Date.now(),
                    name: name,
                    message: message,
                    signature: dataUrl,
                    date: "Sot"
                };

                const updatedList = [newEntry, ...signatures];
                setSignatures(updatedList);
                localStorage.setItem('guestbook_signatures', JSON.stringify(updatedList));

                clearCanvas();
                setName("");
                setMessage("");
            };

            return (
                <div className="py-12 mt-12 border-t border-slate-700/50">
                     <div className="flex items-center gap-4 mb-12 justify-center">
                        <span className="h-px w-12 bg-cyan-500"></span>
                        <span className="text-cyan-500 uppercase tracking-widest font-bold text-xl">{t.about.guestbookTitle} 2.0</span>
                        <span className="h-px w-12 bg-cyan-500"></span>
                    </div>

                    <div className="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12">
                        
                        <div>
                            <div className={`glass-panel p-8 rounded-2xl ${darkMode ? 'bg-slate-900/50' : 'bg-white border-slate-200'}`}>
                                <h3 className={`text-xl font-serif font-bold mb-6 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-slate-900'}`}>
                                    <Icons.Pen className="w-5 h-5 text-cyan-500" /> {t.about.signHere}
                                </h3>
                                
                                <div className="space-y-4 mb-6">
                                    <input 
                                        value={name}
                                        onChange={(e) => setName(e.target.value)}
                                        placeholder="Emri juaj" 
                                        className={`w-full p-3 rounded border outline-none focus:border-cyan-500 ${darkMode ? 'bg-slate-800 border-slate-700 text-white' : 'bg-slate-50 border-slate-300'}`}
                                    />
                                    <textarea 
                                        value={message}
                                        onChange={(e) => setMessage(e.target.value)}
                                        placeholder={t.about.leaveNote}
                                        className={`w-full p-3 rounded border outline-none focus:border-cyan-500 h-24 ${darkMode ? 'bg-slate-800 border-slate-700 text-white' : 'bg-slate-50 border-slate-300'}`}
                                    ></textarea>
                                </div>

                                <div className="flex justify-between items-center mb-2">
                                    <p className={`text-sm ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>Nënshkrimi (Efekt Boje):</p>
                                    <span className="text-xs text-cyan-500 animate-pulse">Prekni për të shkruar</span>
                                </div>
                                <div className={`border-2 border-dashed rounded-lg overflow-hidden touch-none mb-4 relative ${darkMode ? 'border-slate-700 bg-slate-800/50' : 'border-slate-300 bg-slate-50'}`}>
                                    <canvas
                                        ref={canvasRef}
                                        className="signature-pad w-full h-32 cursor-crosshair relative z-10"
                                        onMouseDown={startDrawing}
                                        onMouseMove={draw}
                                        onMouseUp={stopDrawing}
                                        onMouseLeave={stopDrawing}
                                        onTouchStart={startDrawing}
                                        onTouchMove={draw}
                                        onTouchEnd={stopDrawing}
                                    />
                                    <div className="absolute inset-0 flex items-center justify-center pointer-events-none opacity-10">
                                        <Icons.Feather className="w-16 h-16" />
                                    </div>
                                </div>

                                <div className="flex justify-between items-center">
                                    <button onClick={clearCanvas} className={`text-xs uppercase tracking-wider font-bold hover:text-red-500 transition-colors ${darkMode ? 'text-slate-500' : 'text-slate-400'}`}>
                                        {t.about.clearBtn}
                                    </button>
                                    <button onClick={saveSignature} className="px-6 py-3 bg-cyan-600 text-white rounded font-bold hover:bg-cyan-500 transition-all shadow-lg shadow-cyan-500/20 flex items-center gap-2">
                                         {t.about.submitBtn} <Icons.Send className="w-4 h-4" />
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div className="relative">
                            <h3 className={`text-xl font-serif font-bold mb-6 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-slate-900'}`}>
                                <Icons.Quote className="w-5 h-5 text-cyan-500" /> {t.about.recentSignatures}
                            </h3>
                            
                            <div className="space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar">
                                {signatures.map((entry, index) => (
                                    <div key={entry.id} className={`glass-panel p-6 rounded-xl relative group transition-all hover:translate-x-1 ${darkMode ? 'bg-slate-900/30' : 'bg-white border-slate-100'}`}>
                                        <div className="absolute top-4 right-4 opacity-10">
                                            <Icons.Quote className={`w-8 h-8 ${darkMode ? 'text-white' : 'text-black'}`} />
                                        </div>

                                        <p className={`italic mb-4 text-lg leading-relaxed ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>"{entry.message}"</p>
                                        
                                        <div className="flex items-center justify-between border-t border-dashed pt-4 border-slate-500/20">
                                            <div>
                                                <div className={`font-bold ${darkMode ? 'text-cyan-400' : 'text-cyan-600'}`}>{entry.name}</div>
                                                <div className="text-xs text-slate-500">{entry.date}</div>
                                            </div>
                                            {entry.signature && (
                                                <img src={entry.signature} alt="Signature" className="h-10 opacity-80 filter invert-0 dark:invert" />
                                            )}
                                        </div>
                                    </div>
                                ))}
                            </div>
                            <div className={`absolute bottom-0 left-0 w-full h-20 bg-gradient-to-t pointer-events-none ${darkMode ? 'from-slate-900' : 'from-white'}`}></div>
                        </div>

                    </div>
                </div>
            )
        }

        const BookmarksSection = ({ darkMode, t, bookmarks, onView, onBuy }) => {
            const { bookmarks: items, removeBookmark } = bookmarks;

            // SEO for bookmarks page
            useEffect(() => {
                document.title = "Bookmarks - Agim Sherifi | Artikuj të ruajtur";
                const metaDesc = document.querySelector('meta[name="description"]');
                if (metaDesc) {
                    metaDesc.setAttribute('content', 'Lista e artikujve të ruajtur nga Agim Sherifi. Thënie, poezi dhe artikuj të zgjedhur nga përdoruesit.');
                }
            }, []);

            if (items.length === 0) {
                return (
                    <section id="bookmarks" className="py-24 min-h-screen flex items-center justify-center">
                        <SEOManager 
                            title="Bookmarks - Agim Sherifi"
                            description="Lista e artikujve të ruajtur nga Agim Sherifi. Thënie, poezi dhe artikuj të zgjedhur nga përdoruesit."
                            url="/bookmarks"
                            type="website"
                        />
                        <div className="text-center">
                            <Icons.Bookmark className="w-16 h-16 mx-auto mb-4 text-slate-400" />
                            <h1 className={`text-2xl font-serif mb-4 ${darkMode ? 'text-white' : 'text-slate-900'}`}>{t.bookmarks.title}</h1>
                            <p className={`mb-8 ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>{t.bookmarks.empty}</p>
                            <button onClick={() => window.history.back()} className="px-6 py-3 bg-cyan-600 text-white rounded-full hover:bg-cyan-500">
                                Kthehu mbrapa
                            </button>
                        </div>
                    </section>
                );
            }

            return (
                <section id="bookmarks" className="py-24 min-h-screen">
                    <SEOManager 
                        title="Bookmarks - Agim Sherifi"
                        description="Lista e artikujve të ruajtur nga Agim Sherifi. Thënie, poezi dhe artikuj të zgjedhur nga përdoruesit."
                        url="/bookmarks"
                        type="website"
                    />
                    <div className="max-w-7xl mx-auto px-4">
                        <div className="text-center mb-16">
                            <h1 className={`text-4xl md:text-5xl font-serif font-bold mb-4 ${darkMode ? 'text-white' : 'text-slate-900'}`}>
                                {t.bookmarks.title}
                            </h1>
                            <p className={`max-w-2xl mx-auto text-lg ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>
                                {items.length} {items.length === 1 ? 'artikull i ruajtur' : 'artikuj të ruajtur'}
                            </p>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            {items.map(bookmark => (
                                <div key={bookmark.id} className={`rounded-xl overflow-hidden glass-panel ${darkMode ? 'bg-slate-900/50' : 'bg-white'}`}>
                                    <div className="p-4 border-b border-slate-700/30 flex justify-between items-center">
                                        <span className={`text-xs uppercase font-bold ${bookmark.type === 'quote' ? 'text-cyan-500' : 'text-purple-500'}`}>
                                            {bookmark.type === 'quote' ? t.bookmarks.quote : t.bookmarks.poem}
                                        </span>
                                        <div className="flex gap-2">
                                            <button 
                                                onClick={() => {
                                                    if (bookmark.type === 'quote') {
                                                        onView(bookmark.item);
                                                    } else {
                                                        onView(bookmark.item);
                                                    }
                                                }}
                                                className="text-cyan-500 hover:text-cyan-400 text-sm"
                                            >
                                                <Icons.Eye className="w-4 h-4" />
                                            </button>
                                            <button 
                                                onClick={() => removeBookmark(bookmark.id)}
                                                className="text-red-400 hover:text-red-500 text-sm"
                                            >
                                                <Icons.X className="w-4 h-4" />
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div className="p-4">
                                        {bookmark.type === 'quote' ? (
                                            <>
                                                <div className="h-40 overflow-hidden rounded mb-4">
                                                    <OptimizedImage 
                                                        src={bookmark.item.image} 
                                                        alt="Thënie"
                                                        className="w-full h-full object-cover"
                                                        lazy={true}
                                                    />
                                                </div>
                                                <p className={`italic mb-4 ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>
                                                    "{bookmark.item.text.substring(0, 80)}..."
                                                </p>
                                                <div className="flex justify-between items-center">
                                                    <span className="text-xs text-slate-500">
                                                        {bookmark.item.category}
                                                    </span>
                                                    <button 
                                                        onClick={() => onBuy(bookmark.item)}
                                                        className="text-cyan-500 text-xs font-bold uppercase"
                                                    >
                                                        {t.quotes.buy}
                                                    </button>
                                                </div>
                                            </>
                                        ) : (
                                            <>
                                                <h3 className={`font-bold mb-2 ${darkMode ? 'text-white' : 'text-slate-900'}`}>
                                                    {bookmark.item.title}
                                                </h3>
                                                <p className={`text-sm mb-4 ${darkMode ? 'text-slate-400' : 'text-slate-600'}`}>
                                                    {bookmark.item.preview || bookmark.item.content.substring(0, 120)}...
                                                </p>
                                                <div className="flex justify-between items-center">
                                                    <div className="text-xs text-slate-500">
                                                        {bookmark.item.date}
                                                    </div>
                                                    <div className="flex items-center">
                                                        <StarDisplay rating={bookmark.item.rating} />
                                                    </div>
                                                </div>
                                            </>
                                        )}
                                        <div className="mt-4 pt-4 border-t border-slate-700/30 text-xs text-slate-500">
                                            Ruajtur më: {new Date(bookmark.date).toLocaleDateString()}
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </section>
            );
        };

        const ContactSection = ({ darkMode, t, onTraining, onSuggestion, onRequest, onViewImage, bookmarks }) => {
            // SEO for about page
            useEffect(() => {
                document.title = "Rreth Meje - Agim Sherifi | Mësimdhënës, Poet, Fotograf";
                const metaDesc = document.querySelector('meta[name="description"]');
                if (metaDesc) {
                    metaDesc.setAttribute('content', 'Rreth Agim Sherifit - mësimdhënës i robotikës, poet dhe fotograf. Eksploroni rrugëtimin e tij dhe bashkëpunimet me të tjerët.');
                }
            }, []);

            return (
                <section id="about" className={`py-24 relative min-h-screen z-10`}>
                    <SEOManager 
                        title="Rreth Meje - Agim Sherifi"
                        description="Rreth Agim Sherifit - mësimdhënës i robotikës, poet dhe fotograf. Eksploroni rrugëtimin e tij dhe bashkëpunimet me të tjerët."
                        url="/rreth-meje"
                        type="website"
                    />
                    <div className="max-w-7xl mx-auto px-4">
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center mb-12">
                            <div className="relative">
                                <div className="absolute -inset-4 bg-cyan-500/20 blur-xl rounded-full"></div>
                                <OptimizedImage 
                                    src="./images/galeri/portrait.png" 
                                    alt="Agim Sherifi Portrait" 
                                    className="relative rounded-2xl shadow-2xl grayscale hover:grayscale-0 transition-all duration-700 w-full"
                                    lazy={true}
                                />
                            </div>
                            <div>
                                <div className="flex items-center gap-4 mb-6">
                                    <span className="h-px w-12 bg-cyan-500"></span>
                                    <span className="text-cyan-500 uppercase tracking-widest font-bold">Rreth Meje</span>
                                    <span className="h-px w-12 bg-cyan-500"></span>
                                </div>
                                <h1 className={`text-5xl font-serif font-bold mb-8 ${darkMode ? 'text-white' : 'text-slate-900'}`}>Dualiteti i Shpirtit</h1>
                                <p className={`text-lg leading-relaxed mb-6 ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>
                                    Unë jam Agim Sherifi — një krijues që shpreh veten përmes fjalëve dhe imazheve. Shkruaj <strong className="text-cyan-500"> thënie, poezi dhe proza </strong> që lindin nga momentet e thjeshta, ndërsa fotografia më lejon të kap emocione që fjala nuk i mban dot. Fjalët dhe fotot e mia bashkohen në një stil të qetë, reflektues dhe të sinqertë.
                                </p>
                                <p className={`text-lg leading-relaxed mb-8 ${darkMode ? 'text-slate-300' : 'text-slate-600'}`}>
                                    Si <strong className="text-cyan-500"> mësues i ICT-së dhe Robotikës,</strong> punoj me brezat e rinj për t’u ndezur kureshtjen dhe për t’i afruar me teknologjinë. Mësimi për mua është po aq art sa shkrimi — një mënyrë për të formuar mendje, për të frymëzuar dhe për të hapur horizonte të reja. 
                                </p>

                                <div className="grid grid-cols-3 gap-4 mb-8">
                                    <AnimatedCounter end={13} label="Projekte" IconCmp={Icons.Cpu} darkMode={darkMode} />
                                    <AnimatedCounter end={213} label="Thënie" IconCmp={Icons.Feather} darkMode={darkMode} />
                                    <AnimatedCounter end={100} label="Pasion" IconCmp={Icons.Heart} darkMode={darkMode} />
                                </div>

                                <div className="flex flex-wrap gap-4 justify-center lg:justify-start">
                                    <button onClick={onTraining} className="px-6 py-3 bg-cyan-600 text-white font-bold rounded hover:bg-cyan-500 transition-colors flex items-center gap-2">
                                        <Icons.Cpu className="w-5 h-5" /> Trajnime & Inovacion
                                    </button>
                                    <button onClick={onSuggestion} className="px-6 py-3 border border-cyan-500 text-cyan-500 font-bold rounded hover:bg-cyan-500/10 transition-colors flex items-center gap-2">
                                        <Icons.Bulb className="w-5 h-5" /> Sugjerime & Ide
                                    </button>
                                    <button onClick={onRequest} className="px-6 py-3 bg-slate-800 text-white font-bold rounded hover:bg-slate-700 transition-colors flex items-center gap-2">
                                        <Icons.Feather className="w-5 h-5" /> Porosit Vargje
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <CertificatesStrip darkMode={darkMode} t={t} />

                        <TimelineSection darkMode={darkMode} t={t} onViewImage={onViewImage} />

                        <PortfolioAnalytics darkMode={darkMode} />

                        <GuestbookSection darkMode={darkMode} t={t} />

                    </div>
                </section>
            );
        };

        const Footer = ({ darkMode, onNewsletter, t }) => (
            <footer className={`relative z-10 py-10 border-t ${darkMode ? 'bg-slate-950 border-slate-800' : 'bg-white border-slate-100'}`}>
                <div className="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-6 text-sm text-slate-500">
                    
                    <div className="flex gap-4 lg:hidden order-2 md:order-none">
                        {DATA.socials.map((item, i) => (
                            <a 
                                key={i} 
                                href={item.link} 
                                target="_blank" 
                                rel="noopener noreferrer"
                                className={`p-2 rounded-full transition-colors ${darkMode ? 'bg-slate-800 text-slate-400 hover:text-white' : 'bg-slate-100 text-slate-600 hover:text-slate-900'}`}
                            >
                                <item.IconCmp className="w-5 h-5" />
                            </a>
                        ))}
                    </div>

                    <p className="order-1 md:order-none">© 2026 {DATA.profile.name}. {t.footer.rights}</p>
                    
                    <button onClick={onNewsletter} className="flex items-center gap-2 hover:text-cyan-500 transition-colors order-3 md:order-none">
                        <Icons.Mail className="w-3 h-3" /> Newsletter
                    </button>
                </div>
            </footer>
        );

        const GoToTop = () => {
            const [show, setShow] = useState(false);
            useEffect(() => {
                const check = () => setShow(window.scrollY > 300);
                window.addEventListener('scroll', check);
                return () => window.removeEventListener('scroll', check);
            }, []);
            const scroll = () => window.scrollTo({ top: 0, behavior: 'smooth' });
            if (!show) return null;
            return <button onClick={scroll} className="fixed bottom-8 right-8 z-40 p-3 bg-cyan-500 text-white rounded-full shadow-lg hover:bg-cyan-600 animate-fade-in"><Icons.ChevronDown className="w-6 h-6 rotate-180" /></button>;
        };

        const FloatingSocials = () => (
            <div className="fixed left-6 top-1/2 -translate-y-1/2 z-40 hidden lg:flex flex-col gap-4">
                {DATA.socials.map((item, i) => (
                    <a 
                        key={i} 
                        href={item.link} 
                        target="_blank" 
                        rel="noopener noreferrer"
                        className="p-3 glass-panel rounded-full text-slate-400 hover:text-cyan-400 hover:scale-110 transition-all cursor-pointer"
                    >
                        <item.IconCmp className="w-5 h-5" />
                    </a>
                ))}
                <div className="h-16 w-px bg-slate-700 mx-auto"></div>
            </div>
        );

        const App = () => {
            // Shto në App component
useEffect(() => {
  // Mat kohën e ngarkimit
  const timing = window.performance.timing;
  const loadTime = timing.loadEventEnd - timing.navigationStart;
  console.log('Page load time:', loadTime);
  
  // Track user interactions
  const trackClick = (e) => {
    if (window.gtag) {
      gtag('event', 'click', {
        'event_category': 'engagement',
        'event_label': e.target.tagName + ' ' + e.target.className
      });
    }
  };
  
  document.addEventListener('click', trackClick);
  return () => document.removeEventListener('click', trackClick);
}, []);
            const [darkMode, setDarkMode] = useState(false);
            const [currentView, setCurrentView] = useState('home');
            const [loading, setLoading] = useState(true);
            const [checkoutItem, setCheckoutItem] = useState(null);
            const [viewItem, setViewItem] = useState(null);
            const [filmPoem, setFilmPoem] = useState(null);
            const [trainingOpen, setTrainingOpen] = useState(false);
            const [suggestionOpen, setSuggestionOpen] = useState(false);
            const [requestOpen, setRequestOpen] = useState(false);
            const [showPoemDay, setShowPoemDay] = useState(false); 
            const [lang, setLang] = useState('sq');
            const [newsletterOpen, setNewsletterOpen] = useState(false);
            const [printModal, setPrintModal] = useState({ isOpen: false, item: null, type: null });
            
            const t = TRANSLATIONS[lang];
            const bookmarks = useBookmarks();
            const notificationSystem = NotificationSystem();

            const dailyPoem = useMemo(() => {
                const today = new Date().getDate(); 
                const allItems = [...DATA.quotes]; 
                const index = today % allItems.length;
                return allItems[index];
            }, []);

            const handleLoaderComplete = useCallback(() => {
                setLoading(false);
            }, []);

            useEffect(() => {
                // Performance monitoring
                if ('performance' in window) {
                    // Track page load time
                    const [navigationEntry] = performance.getEntriesByType('navigation');
                    if (navigationEntry) {
                        console.log('[Performance] Page loaded in:', navigationEntry.loadEventEnd, 'ms');
                    }
                    
                    // Monitor CLS (Cumulative Layout Shift)
                    let clsValue = 0;
                    let clsEntries = [];
                    
                    const observer = new PerformanceObserver((list) => {
                        for (const entry of list.getEntries()) {
                            if (!entry.hadRecentInput) {
                                clsEntries.push(entry);
                                clsValue += entry.value;
                            }
                        }
                    });
                    
                    observer.observe({ type: 'layout-shift', buffered: true });
                    
                    // Log CLS on page hide
                    const logCLS = () => {
                        if (clsEntries.length > 0) {
                            console.log('[Performance] CLS Score:', clsValue);
                        }
                    };
                    
                    window.addEventListener('visibilitychange', () => {
                        if (document.visibilityState === 'hidden') {
                            logCLS();
                            observer.disconnect();
                        }
                    });
                    
                    return () => observer.disconnect();
                }
            }, []);

            // Monitor bundle size
            useEffect(() => {
                if ('performance' in window && performance.memory) {
                    console.log('[Performance] Memory used:', 
                        Math.round(performance.memory.usedJSHeapSize / 1048576), 'MB'
                    );
                }
            }, [currentView]);

            useEffect(() => {
                console.log('[Portfolio] Features loaded:');
                console.log('- SmartRecommendations:', typeof SmartRecommendations);
                console.log('- SocialShareSuite:', typeof SocialShareSuite);
                console.log('- OptimizedImage:', typeof OptimizedImage);
                console.log('- FloatingActionMenu:', typeof FloatingActionMenu);
                console.log('- ErrorBoundary:', typeof ErrorBoundary);
            }, []);

            useEffect(() => {
                const hasSeen = sessionStorage.getItem('hasSeenPoemDay');
                if (!hasSeen && !loading) {
                    setTimeout(() => setShowPoemDay(true), 1500); 
                    sessionStorage.setItem('hasSeenPoemDay', 'true');
                }
            }, [loading]);

            useEffect(() => { 
                window.scrollTo(0, 0); 
            }, [currentView]);

            const handlePrintRequest = (item, type) => {
                setPrintModal({ isOpen: true, item, type });
            };

            return (
                <div className={`min-h-screen transition-colors duration-500 font-sans selection:bg-cyan-500 selection:text-white ${darkMode ? 'bg-slate-900 text-slate-100' : 'bg-white text-slate-900'}`}>

                    {loading && <IntroLoader onComplete={handleLoaderComplete} />}

                    <ScrollProgress darkMode={darkMode} />
                    <ParallaxBackground darkMode={darkMode} />
                    <ConstellationBackground darkMode={darkMode} />

                    <Navigation darkMode={darkMode} setDarkMode={setDarkMode} currentView={currentView} onNavigate={setCurrentView} lang={lang} setLang={setLang} t={t} onRequest={() => setRequestOpen(true)} />
                    
                    <NotificationContainer
                        notifications={notificationSystem.notifications}
                        removeNotification={notificationSystem.removeNotification}
                        darkMode={darkMode}
                    />

                    <main className="relative">
                        <PageTransition uniqueKey={currentView}>
                            {currentView === 'home' && <Hero darkMode={darkMode} onNavigate={setCurrentView} t={t} />}
                            {currentView === 'quotes' && <QuotesSection darkMode={darkMode} onBuy={setCheckoutItem} onView={setViewItem} t={t} bookmarks={bookmarks} />}
                            {currentView === 'poems' && <PoetrySection darkMode={darkMode} t={t} onView={setFilmPoem} bookmarks={bookmarks} />}
                            {currentView === 'gallery' && <GallerySection darkMode={darkMode} onBuy={setCheckoutItem} onView={setViewItem} t={t} />}
                            {currentView === 'about' && <ContactSection darkMode={darkMode} t={t} onTraining={() => setTrainingOpen(true)} onSuggestion={() => setSuggestionOpen(true)} onRequest={() => setRequestOpen(true)} onViewImage={setViewItem} bookmarks={bookmarks} />}
                            {currentView === 'bookmarks' && <BookmarksSection darkMode={darkMode} t={t} bookmarks={bookmarks} onView={(item) => {
                                if (item.category) {
                                    setViewItem(item);
                                } else {
                                    setFilmPoem(item);
                                }
                            }} onBuy={setCheckoutItem} />}
                        </PageTransition>
                    </main>

                    <Footer darkMode={darkMode} onNewsletter={() => setNewsletterOpen(true)} t={t} />

                    <CheckoutModal item={checkoutItem} isOpen={!!checkoutItem} onClose={() => setCheckoutItem(null)} darkMode={darkMode} t={t} />
                    
                    <ViewModal item={viewItem} isOpen={!!viewItem} onClose={() => setViewItem(null)} darkMode={darkMode} onPrintRequest={handlePrintRequest} bookmarks={bookmarks} />

                    <PoemFilmModal poem={filmPoem} isOpen={!!filmPoem} onClose={() => setFilmPoem(null)} darkMode={darkMode} onPrintRequest={handlePrintRequest} bookmarks={bookmarks} />
                    
                    <NewsletterModal isOpen={newsletterOpen} onClose={() => setNewsletterOpen(false)} t={t} darkMode={darkMode} />
                    <TrainingModal isOpen={trainingOpen} onClose={() => setTrainingOpen(false)} darkMode={darkMode} />
                    <SuggestionModal isOpen={suggestionOpen} onClose={() => setSuggestionOpen(false)} darkMode={darkMode} />

                    <RequestModal isOpen={requestOpen} onClose={() => setRequestOpen(false)} darkMode={darkMode} t={t} />

                    {showPoemDay && <PoemDayModal onClose={() => setShowPoemDay(false)} darkMode={darkMode} t={t} dailyPoem={dailyPoem} />}

                    <PrintThemeSelector isOpen={printModal.isOpen} item={printModal.item} type={printModal.type} onClose={() => setPrintModal({ ...printModal, isOpen: false })} />

                    <FloatingActionMenu darkMode={darkMode} />
                    <FloatingSocials />
                    <GoToTop />
                </div>
            );
        };

        // Mbështjell me ErrorBoundary
        const RootApp = () => {
            return (
                <ErrorBoundary>
                    <App />
                </ErrorBoundary>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<RootApp />);
    </script>
</body>
</html>